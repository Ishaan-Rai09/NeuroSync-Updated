"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/pinata/history";
exports.ids = ["pages/api/pinata/history"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\pinata\\history.js */ \"(api-node)/./pages/api/pinata/history.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/pinata/history\",\n        pathname: \"/api/pinata/history\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcGluYXRhJTJGaGlzdG9yeSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGluYXRhJTVDaGlzdG9yeS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUM2RDtBQUM3RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMseURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHlEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBpbmF0YVxcXFxoaXN0b3J5LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9waW5hdGEvaGlzdG9yeVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BpbmF0YS9oaXN0b3J5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/pinata/history.js":
/*!*************************************!*\
  !*** ./pages/api/pinata/history.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Pinata configuration\nconst JWT = process.env.PINATA_JWT;\nconst PINATA_API_KEY = process.env.PINATA_API_KEY;\nconst PINATA_API_SECRET = process.env.PINATA_API_SECRET;\n/**\r\n * @route GET /api/pinata/history\r\n * @desc Get transaction history for a wallet from Pinata IPFS\r\n * @access Private\r\n */ async function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            success: false,\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { walletAddress } = req.query;\n        if (!walletAddress) {\n            return res.status(400).json({\n                success: false,\n                error: 'Wallet address is required'\n            });\n        }\n        console.log('Fetching transaction history for wallet:', walletAddress);\n        // Validate API credentials\n        if (!JWT && (!PINATA_API_KEY || !PINATA_API_SECRET)) {\n            console.error('Pinata API credentials not configured in environment variables');\n            return res.status(500).json({\n                success: false,\n                error: 'Pinata API credentials not configured'\n            });\n        }\n        // In a production app, you would use a database to store the latest IPFS hash\n        // for each user's transaction history. For this demo, we're using global variables\n        // or falling back to mock data.\n        // Check for transactions in our global temporary storage\n        let transactions = [];\n        try {\n            // First check if we have stored an IPFS hash for this user's history\n            const ipfsHash = global.userHistoryCids?.[walletAddress];\n            if (ipfsHash) {\n                console.log(`Found history IPFS hash for ${walletAddress}: ${ipfsHash}`);\n                // Try to retrieve the content from Pinata\n                const gatewayUrl = `https://gateway.pinata.cloud/ipfs/${ipfsHash}`;\n                try {\n                    const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(gatewayUrl);\n                    if (response.data && response.data.transactions) {\n                        transactions = response.data.transactions;\n                        console.log(`Retrieved ${transactions.length} transactions from Pinata`);\n                    }\n                } catch (error) {\n                    console.error('Error fetching from Pinata gateway:', error);\n                    // If we can't retrieve from Pinata, try our in-memory backup\n                    if (global.userTransactions?.[walletAddress]) {\n                        transactions = global.userTransactions[walletAddress];\n                        console.log(`Retrieved ${transactions.length} transactions from memory`);\n                    }\n                }\n            } else {\n                console.log('No history IPFS hash found, checking if we have transactions in memory');\n                // Try to load from global temporary storage\n                if (global.userTransactions?.[walletAddress]) {\n                    transactions = global.userTransactions[walletAddress];\n                    console.log(`Retrieved ${transactions.length} transactions from memory`);\n                } else {\n                    // If we don't have anything, provide sample data for new users\n                    console.log('No transactions found, providing initial data for new user');\n                    // For new users, we want to show an initial transaction of 100 NEURO tokens\n                    transactions = [\n                        {\n                            id: `initial-${walletAddress}`,\n                            type: 'INITIAL',\n                            amount: '100',\n                            description: 'Welcome Bonus',\n                            timestamp: new Date().toISOString()\n                        }\n                    ];\n                    // Store this initial transaction\n                    if (!global.userTransactions) {\n                        global.userTransactions = {};\n                    }\n                    global.userTransactions[walletAddress] = transactions;\n                    // Store on Pinata too (fire and forget)\n                    try {\n                        const initialData = {\n                            walletAddress,\n                            type: 'INITIAL',\n                            amount: '100',\n                            description: 'Welcome Bonus',\n                            timestamp: new Date().toISOString()\n                        };\n                        // Store through our own API endpoint\n                        fetch('/api/pinata/store', {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(initialData)\n                        }).catch((e)=>console.error('Failed to record initial balance:', e));\n                    } catch (err) {\n                        console.error('Failed to store initial balance on Pinata:', err);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error('Error retrieving history:', error);\n            // If we fail to retrieve history, use an empty array\n            transactions = [];\n        }\n        return res.status(200).json({\n            success: true,\n            walletAddress,\n            transactions,\n            debug: {\n                hasIpfsHash: !!global.userHistoryCids?.[walletAddress],\n                hasTransactions: !!global.userTransactions?.[walletAddress],\n                transactionCount: transactions.length\n            }\n        });\n    } catch (error) {\n        console.error('Pinata retrieval error:', error);\n        return res.status(500).json({\n            success: false,\n            error: `Failed to retrieve transaction history: ${error.message}`,\n            stack:  true ? error.stack : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RDLE9BQU8sQ0FBQyx3Q0FBd0MsRUFBRUEsTUFBTW1DLE9BQU8sRUFBRTtZQUNqRUMsT0FBT2hELEtBQXNDLEdBQUdZLE1BQU1vQyxLQUFLLEdBQUdDLENBQVNBO1FBQ3pFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxEZWtodGUgaGFpXFxuZXVyb1N5bmNcXE5ldXJvU3luYy1BSS1Gcm9udGVuZFxccGFnZXNcXGFwaVxccGluYXRhXFxoaXN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XHJcblxyXG4vLyBQaW5hdGEgY29uZmlndXJhdGlvblxyXG5jb25zdCBKV1QgPSBwcm9jZXNzLmVudi5QSU5BVEFfSldUO1xyXG5jb25zdCBQSU5BVEFfQVBJX0tFWSA9IHByb2Nlc3MuZW52LlBJTkFUQV9BUElfS0VZO1xyXG5jb25zdCBQSU5BVEFfQVBJX1NFQ1JFVCA9IHByb2Nlc3MuZW52LlBJTkFUQV9BUElfU0VDUkVUO1xyXG5cclxuLyoqXHJcbiAqIEByb3V0ZSBHRVQgL2FwaS9waW5hdGEvaGlzdG9yeVxyXG4gKiBAZGVzYyBHZXQgdHJhbnNhY3Rpb24gaGlzdG9yeSBmb3IgYSB3YWxsZXQgZnJvbSBQaW5hdGEgSVBGU1xyXG4gKiBAYWNjZXNzIFByaXZhdGVcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IFxyXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyBcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgd2FsbGV0QWRkcmVzcyB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgXHJcbiAgICBpZiAoIXdhbGxldEFkZHJlc3MpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ1dhbGxldCBhZGRyZXNzIGlzIHJlcXVpcmVkJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgdHJhbnNhY3Rpb24gaGlzdG9yeSBmb3Igd2FsbGV0OicsIHdhbGxldEFkZHJlc3MpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIEFQSSBjcmVkZW50aWFsc1xyXG4gICAgaWYgKCFKV1QgJiYgKCFQSU5BVEFfQVBJX0tFWSB8fCAhUElOQVRBX0FQSV9TRUNSRVQpKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BpbmF0YSBBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdQaW5hdGEgQVBJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbiBhIHByb2R1Y3Rpb24gYXBwLCB5b3Ugd291bGQgdXNlIGEgZGF0YWJhc2UgdG8gc3RvcmUgdGhlIGxhdGVzdCBJUEZTIGhhc2hcclxuICAgIC8vIGZvciBlYWNoIHVzZXIncyB0cmFuc2FjdGlvbiBoaXN0b3J5LiBGb3IgdGhpcyBkZW1vLCB3ZSdyZSB1c2luZyBnbG9iYWwgdmFyaWFibGVzXHJcbiAgICAvLyBvciBmYWxsaW5nIGJhY2sgdG8gbW9jayBkYXRhLlxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBmb3IgdHJhbnNhY3Rpb25zIGluIG91ciBnbG9iYWwgdGVtcG9yYXJ5IHN0b3JhZ2VcclxuICAgIGxldCB0cmFuc2FjdGlvbnMgPSBbXTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgd2UgaGF2ZSBzdG9yZWQgYW4gSVBGUyBoYXNoIGZvciB0aGlzIHVzZXIncyBoaXN0b3J5XHJcbiAgICAgIGNvbnN0IGlwZnNIYXNoID0gZ2xvYmFsLnVzZXJIaXN0b3J5Q2lkcz8uW3dhbGxldEFkZHJlc3NdO1xyXG4gICAgICBcclxuICAgICAgaWYgKGlwZnNIYXNoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIGhpc3RvcnkgSVBGUyBoYXNoIGZvciAke3dhbGxldEFkZHJlc3N9OiAke2lwZnNIYXNofWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byByZXRyaWV2ZSB0aGUgY29udGVudCBmcm9tIFBpbmF0YVxyXG4gICAgICAgIGNvbnN0IGdhdGV3YXlVcmwgPSBgaHR0cHM6Ly9nYXRld2F5LnBpbmF0YS5jbG91ZC9pcGZzLyR7aXBmc0hhc2h9YDtcclxuICAgICAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoZ2F0ZXdheVVybCk7XHJcbiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLnRyYW5zYWN0aW9ucykge1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbnMgPSByZXNwb25zZS5kYXRhLnRyYW5zYWN0aW9ucztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFJldHJpZXZlZCAke3RyYW5zYWN0aW9ucy5sZW5ndGh9IHRyYW5zYWN0aW9ucyBmcm9tIFBpbmF0YWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmcm9tIFBpbmF0YSBnYXRld2F5OicsIGVycm9yKTtcclxuICAgICAgICAgIC8vIElmIHdlIGNhbid0IHJldHJpZXZlIGZyb20gUGluYXRhLCB0cnkgb3VyIGluLW1lbW9yeSBiYWNrdXBcclxuICAgICAgICAgIGlmIChnbG9iYWwudXNlclRyYW5zYWN0aW9ucz8uW3dhbGxldEFkZHJlc3NdKSB7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9ucyA9IGdsb2JhbC51c2VyVHJhbnNhY3Rpb25zW3dhbGxldEFkZHJlc3NdO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7dHJhbnNhY3Rpb25zLmxlbmd0aH0gdHJhbnNhY3Rpb25zIGZyb20gbWVtb3J5YCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBoaXN0b3J5IElQRlMgaGFzaCBmb3VuZCwgY2hlY2tpbmcgaWYgd2UgaGF2ZSB0cmFuc2FjdGlvbnMgaW4gbWVtb3J5Jyk7XHJcbiAgICAgICAgLy8gVHJ5IHRvIGxvYWQgZnJvbSBnbG9iYWwgdGVtcG9yYXJ5IHN0b3JhZ2VcclxuICAgICAgICBpZiAoZ2xvYmFsLnVzZXJUcmFuc2FjdGlvbnM/Llt3YWxsZXRBZGRyZXNzXSkge1xyXG4gICAgICAgICAgdHJhbnNhY3Rpb25zID0gZ2xvYmFsLnVzZXJUcmFuc2FjdGlvbnNbd2FsbGV0QWRkcmVzc107XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7dHJhbnNhY3Rpb25zLmxlbmd0aH0gdHJhbnNhY3Rpb25zIGZyb20gbWVtb3J5YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW55dGhpbmcsIHByb3ZpZGUgc2FtcGxlIGRhdGEgZm9yIG5ldyB1c2Vyc1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIHRyYW5zYWN0aW9ucyBmb3VuZCwgcHJvdmlkaW5nIGluaXRpYWwgZGF0YSBmb3IgbmV3IHVzZXInKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gRm9yIG5ldyB1c2Vycywgd2Ugd2FudCB0byBzaG93IGFuIGluaXRpYWwgdHJhbnNhY3Rpb24gb2YgMTAwIE5FVVJPIHRva2Vuc1xyXG4gICAgICAgICAgdHJhbnNhY3Rpb25zID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWQ6IGBpbml0aWFsLSR7d2FsbGV0QWRkcmVzc31gLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdJTklUSUFMJyxcclxuICAgICAgICAgICAgICBhbW91bnQ6ICcxMDAnLFxyXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnV2VsY29tZSBCb251cycsXHJcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU3RvcmUgdGhpcyBpbml0aWFsIHRyYW5zYWN0aW9uXHJcbiAgICAgICAgICBpZiAoIWdsb2JhbC51c2VyVHJhbnNhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbC51c2VyVHJhbnNhY3Rpb25zID0ge307XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBnbG9iYWwudXNlclRyYW5zYWN0aW9uc1t3YWxsZXRBZGRyZXNzXSA9IHRyYW5zYWN0aW9ucztcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU3RvcmUgb24gUGluYXRhIHRvbyAoZmlyZSBhbmQgZm9yZ2V0KVxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgd2FsbGV0QWRkcmVzcyxcclxuICAgICAgICAgICAgICB0eXBlOiAnSU5JVElBTCcsXHJcbiAgICAgICAgICAgICAgYW1vdW50OiAnMTAwJyxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1dlbGNvbWUgQm9udXMnLFxyXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBTdG9yZSB0aHJvdWdoIG91ciBvd24gQVBJIGVuZHBvaW50XHJcbiAgICAgICAgICAgIGZldGNoKCcvYXBpL3BpbmF0YS9zdG9yZScsIHtcclxuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoaW5pdGlhbERhdGEpLFxyXG4gICAgICAgICAgICB9KS5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWNvcmQgaW5pdGlhbCBiYWxhbmNlOicsIGUpKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RvcmUgaW5pdGlhbCBiYWxhbmNlIG9uIFBpbmF0YTonLCBlcnIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICAgIC8vIElmIHdlIGZhaWwgdG8gcmV0cmlldmUgaGlzdG9yeSwgdXNlIGFuIGVtcHR5IGFycmF5XHJcbiAgICAgIHRyYW5zYWN0aW9ucyA9IFtdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB3YWxsZXRBZGRyZXNzLFxyXG4gICAgICB0cmFuc2FjdGlvbnMsXHJcbiAgICAgIGRlYnVnOiB7XHJcbiAgICAgICAgaGFzSXBmc0hhc2g6ICEhZ2xvYmFsLnVzZXJIaXN0b3J5Q2lkcz8uW3dhbGxldEFkZHJlc3NdLFxyXG4gICAgICAgIGhhc1RyYW5zYWN0aW9uczogISFnbG9iYWwudXNlclRyYW5zYWN0aW9ucz8uW3dhbGxldEFkZHJlc3NdLFxyXG4gICAgICAgIHRyYW5zYWN0aW9uQ291bnQ6IHRyYW5zYWN0aW9ucy5sZW5ndGhcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1BpbmF0YSByZXRyaWV2YWwgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBgRmFpbGVkIHRvIHJldHJpZXZlIHRyYW5zYWN0aW9uIGhpc3Rvcnk6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICBzdGFjazogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgfSk7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJheGlvcyIsIkpXVCIsInByb2Nlc3MiLCJlbnYiLCJQSU5BVEFfSldUIiwiUElOQVRBX0FQSV9LRVkiLCJQSU5BVEFfQVBJX1NFQ1JFVCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwid2FsbGV0QWRkcmVzcyIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsInRyYW5zYWN0aW9ucyIsImlwZnNIYXNoIiwiZ2xvYmFsIiwidXNlckhpc3RvcnlDaWRzIiwiZ2F0ZXdheVVybCIsInJlc3BvbnNlIiwiZ2V0IiwiZGF0YSIsImxlbmd0aCIsInVzZXJUcmFuc2FjdGlvbnMiLCJpZCIsInR5cGUiLCJhbW91bnQiLCJkZXNjcmlwdGlvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImluaXRpYWxEYXRhIiwiZmV0Y2giLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXRjaCIsImUiLCJlcnIiLCJkZWJ1ZyIsImhhc0lwZnNIYXNoIiwiaGFzVHJhbnNhY3Rpb25zIiwidHJhbnNhY3Rpb25Db3VudCIsIm1lc3NhZ2UiLCJzdGFjayIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/pinata/history.js\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();