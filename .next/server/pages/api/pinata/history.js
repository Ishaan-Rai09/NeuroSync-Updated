"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/pinata/history";
exports.ids = ["pages/api/pinata/history"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\pinata\\history.js */ \"(api-node)/./pages/api/pinata/history.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/pinata/history\",\n        pathname: \"/api/pinata/history\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_pinata_history_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcGluYXRhJTJGaGlzdG9yeSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGluYXRhJTVDaGlzdG9yeS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUM2RDtBQUM3RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMseURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHlEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBpbmF0YVxcXFxoaXN0b3J5LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9waW5hdGEvaGlzdG9yeVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BpbmF0YS9oaXN0b3J5XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/pinata/history.js":
/*!*************************************!*\
  !*** ./pages/api/pinata/history.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios?daaa\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Pinata configuration\nconst JWT = process.env.PINATA_JWT;\nconst PINATA_API_KEY = process.env.PINATA_API_KEY;\nconst PINATA_API_SECRET = process.env.PINATA_API_SECRET;\n/**\r\n * @route GET /api/pinata/history\r\n * @desc Get transaction history for a wallet from Pinata IPFS\r\n * @access Private\r\n */ async function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            success: false,\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { walletAddress } = req.query;\n        if (!walletAddress) {\n            return res.status(400).json({\n                success: false,\n                error: 'Wallet address is required'\n            });\n        }\n        console.log('Fetching transaction history for wallet:', walletAddress);\n        // Validate API credentials\n        if (!JWT && (!PINATA_API_KEY || !PINATA_API_SECRET)) {\n            console.error('Pinata API credentials not configured in environment variables');\n            return res.status(500).json({\n                success: false,\n                error: 'Pinata API credentials not configured'\n            });\n        }\n        // In a production app, you would use a database to store the latest IPFS hash\n        // for each user's transaction history. For this demo, we're using global variables\n        // or falling back to mock data.\n        // Check for transactions in our global temporary storage\n        let transactions = [];\n        let foundHistory = false;\n        try {\n            // First check if we have stored an IPFS hash for this specific user's history\n            // Make sure we're comparing addresses in a case-insensitive way\n            const normalizedWalletAddress = walletAddress.toLowerCase();\n            const ipfsHash = global.userHistoryCids?.[normalizedWalletAddress];\n            if (ipfsHash) {\n                console.log(`Found history IPFS hash for ${normalizedWalletAddress}: ${ipfsHash}`);\n                // Try to retrieve the content from Pinata\n                const gatewayUrl = `https://gateway.pinata.cloud/ipfs/${ipfsHash}`;\n                try {\n                    const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(gatewayUrl);\n                    if (response.data && response.data.transactions) {\n                        // Verify that the transactions are actually for this wallet\n                        if (response.data.walletAddress.toLowerCase() === normalizedWalletAddress) {\n                            transactions = response.data.transactions;\n                            console.log(`Retrieved ${transactions.length} transactions from Pinata for ${normalizedWalletAddress}`);\n                            foundHistory = true;\n                        } else {\n                            console.error('Wallet address mismatch in retrieved data');\n                        // We'll continue and try our in-memory backup\n                        }\n                    }\n                } catch (error) {\n                    console.error('Error fetching from Pinata gateway:', error);\n                // If we can't retrieve from Pinata, try our in-memory backup\n                }\n            }\n            // If we couldn't get from IPFS, try our in-memory backup\n            if (!foundHistory && global.userTransactions) {\n                // Ensure we're looking at the right wallet's transactions\n                const userTransactions = global.userTransactions[normalizedWalletAddress] || [];\n                // Filter to make sure we only return transactions for this specific wallet\n                const filteredTransactions = userTransactions.filter((tx)=>tx.walletAddress && tx.walletAddress.toLowerCase() === normalizedWalletAddress);\n                if (filteredTransactions.length > 0) {\n                    transactions = filteredTransactions;\n                    console.log(`Retrieved ${transactions.length} transactions from memory for ${normalizedWalletAddress}`);\n                    foundHistory = true;\n                }\n            }\n            // If we still don't have history, this is a new user\n            if (!foundHistory) {\n                console.log('No transaction history found for this wallet address');\n                return res.status(404).json({\n                    success: false,\n                    error: 'No transaction history found for this wallet address - this appears to be a new user',\n                    isNewUser: true\n                });\n            }\n        } catch (error) {\n            console.error('Error retrieving history:', error);\n            return res.status(500).json({\n                success: false,\n                error: `Error retrieving transaction history: ${error.message}`\n            });\n        }\n        return res.status(200).json({\n            success: true,\n            walletAddress,\n            transactions,\n            debug: {\n                hasIpfsHash: !!global.userHistoryCids?.[walletAddress.toLowerCase()],\n                hasTransactions: !!global.userTransactions?.[walletAddress.toLowerCase()],\n                transactionCount: transactions.length\n            }\n        });\n    } catch (error) {\n        console.error('Pinata retrieval error:', error);\n        return res.status(500).json({\n            success: false,\n            error: `Failed to retrieve transaction history: ${error.message}`,\n            stack:  true ? error.stack : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJEOlxcUHJvamVjdHNcXERla2h0ZSBoYWlcXG5ldXJvU3luY1xcTmV1cm9TeW5jLUFJLUZyb250ZW5kXFxwYWdlc1xcYXBpXFxwaW5hdGFcXGhpc3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbi8vIFBpbmF0YSBjb25maWd1cmF0aW9uXHJcbmNvbnN0IEpXVCA9IHByb2Nlc3MuZW52LlBJTkFUQV9KV1Q7XHJcbmNvbnN0IFBJTkFUQV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuUElOQVRBX0FQSV9LRVk7XHJcbmNvbnN0IFBJTkFUQV9BUElfU0VDUkVUID0gcHJvY2Vzcy5lbnYuUElOQVRBX0FQSV9TRUNSRVQ7XHJcblxyXG4vKipcclxuICogQHJvdXRlIEdFVCAvYXBpL3BpbmF0YS9oaXN0b3J5XHJcbiAqIEBkZXNjIEdldCB0cmFuc2FjdGlvbiBoaXN0b3J5IGZvciBhIHdhbGxldCBmcm9tIFBpbmF0YSBJUEZTXHJcbiAqIEBhY2Nlc3MgUHJpdmF0ZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB3YWxsZXRBZGRyZXNzIH0gPSByZXEucXVlcnk7XHJcbiAgICBcclxuICAgIGlmICghd2FsbGV0QWRkcmVzcykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiAnV2FsbGV0IGFkZHJlc3MgaXMgcmVxdWlyZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyB0cmFuc2FjdGlvbiBoaXN0b3J5IGZvciB3YWxsZXQ6Jywgd2FsbGV0QWRkcmVzcyk7XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgQVBJIGNyZWRlbnRpYWxzXHJcbiAgICBpZiAoIUpXVCAmJiAoIVBJTkFUQV9BUElfS0VZIHx8ICFQSU5BVEFfQVBJX1NFQ1JFVCkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUGluYXRhIEFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogJ1BpbmF0YSBBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWQnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluIGEgcHJvZHVjdGlvbiBhcHAsIHlvdSB3b3VsZCB1c2UgYSBkYXRhYmFzZSB0byBzdG9yZSB0aGUgbGF0ZXN0IElQRlMgaGFzaFxyXG4gICAgLy8gZm9yIGVhY2ggdXNlcidzIHRyYW5zYWN0aW9uIGhpc3RvcnkuIEZvciB0aGlzIGRlbW8sIHdlJ3JlIHVzaW5nIGdsb2JhbCB2YXJpYWJsZXNcclxuICAgIC8vIG9yIGZhbGxpbmcgYmFjayB0byBtb2NrIGRhdGEuXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGZvciB0cmFuc2FjdGlvbnMgaW4gb3VyIGdsb2JhbCB0ZW1wb3Jhcnkgc3RvcmFnZVxyXG4gICAgbGV0IHRyYW5zYWN0aW9ucyA9IFtdO1xyXG4gICAgbGV0IGZvdW5kSGlzdG9yeSA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBGaXJzdCBjaGVjayBpZiB3ZSBoYXZlIHN0b3JlZCBhbiBJUEZTIGhhc2ggZm9yIHRoaXMgc3BlY2lmaWMgdXNlcidzIGhpc3RvcnlcclxuICAgICAgLy8gTWFrZSBzdXJlIHdlJ3JlIGNvbXBhcmluZyBhZGRyZXNzZXMgaW4gYSBjYXNlLWluc2Vuc2l0aXZlIHdheVxyXG4gICAgICBjb25zdCBub3JtYWxpemVkV2FsbGV0QWRkcmVzcyA9IHdhbGxldEFkZHJlc3MudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3QgaXBmc0hhc2ggPSBnbG9iYWwudXNlckhpc3RvcnlDaWRzPy5bbm9ybWFsaXplZFdhbGxldEFkZHJlc3NdO1xyXG4gICAgICBcclxuICAgICAgaWYgKGlwZnNIYXNoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIGhpc3RvcnkgSVBGUyBoYXNoIGZvciAke25vcm1hbGl6ZWRXYWxsZXRBZGRyZXNzfTogJHtpcGZzSGFzaH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcnkgdG8gcmV0cmlldmUgdGhlIGNvbnRlbnQgZnJvbSBQaW5hdGFcclxuICAgICAgICBjb25zdCBnYXRld2F5VXJsID0gYGh0dHBzOi8vZ2F0ZXdheS5waW5hdGEuY2xvdWQvaXBmcy8ke2lwZnNIYXNofWA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGdhdGV3YXlVcmwpO1xyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YS50cmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIHRyYW5zYWN0aW9ucyBhcmUgYWN0dWFsbHkgZm9yIHRoaXMgd2FsbGV0XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLndhbGxldEFkZHJlc3MudG9Mb3dlckNhc2UoKSA9PT0gbm9ybWFsaXplZFdhbGxldEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICB0cmFuc2FjdGlvbnMgPSByZXNwb25zZS5kYXRhLnRyYW5zYWN0aW9ucztcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7dHJhbnNhY3Rpb25zLmxlbmd0aH0gdHJhbnNhY3Rpb25zIGZyb20gUGluYXRhIGZvciAke25vcm1hbGl6ZWRXYWxsZXRBZGRyZXNzfWApO1xyXG4gICAgICAgICAgICAgIGZvdW5kSGlzdG9yeSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignV2FsbGV0IGFkZHJlc3MgbWlzbWF0Y2ggaW4gcmV0cmlldmVkIGRhdGEnKTtcclxuICAgICAgICAgICAgICAvLyBXZSdsbCBjb250aW51ZSBhbmQgdHJ5IG91ciBpbi1tZW1vcnkgYmFja3VwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZnJvbSBQaW5hdGEgZ2F0ZXdheTonLCBlcnJvcik7XHJcbiAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCByZXRyaWV2ZSBmcm9tIFBpbmF0YSwgdHJ5IG91ciBpbi1tZW1vcnkgYmFja3VwXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBnZXQgZnJvbSBJUEZTLCB0cnkgb3VyIGluLW1lbW9yeSBiYWNrdXBcclxuICAgICAgaWYgKCFmb3VuZEhpc3RvcnkgJiYgZ2xvYmFsLnVzZXJUcmFuc2FjdGlvbnMpIHtcclxuICAgICAgICAvLyBFbnN1cmUgd2UncmUgbG9va2luZyBhdCB0aGUgcmlnaHQgd2FsbGV0J3MgdHJhbnNhY3Rpb25zXHJcbiAgICAgICAgY29uc3QgdXNlclRyYW5zYWN0aW9ucyA9IGdsb2JhbC51c2VyVHJhbnNhY3Rpb25zW25vcm1hbGl6ZWRXYWxsZXRBZGRyZXNzXSB8fCBbXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGaWx0ZXIgdG8gbWFrZSBzdXJlIHdlIG9ubHkgcmV0dXJuIHRyYW5zYWN0aW9ucyBmb3IgdGhpcyBzcGVjaWZpYyB3YWxsZXRcclxuICAgICAgICBjb25zdCBmaWx0ZXJlZFRyYW5zYWN0aW9ucyA9IHVzZXJUcmFuc2FjdGlvbnMuZmlsdGVyKHR4ID0+IFxyXG4gICAgICAgICAgdHgud2FsbGV0QWRkcmVzcyAmJiB0eC53YWxsZXRBZGRyZXNzLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRXYWxsZXRBZGRyZXNzXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZmlsdGVyZWRUcmFuc2FjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdHJhbnNhY3Rpb25zID0gZmlsdGVyZWRUcmFuc2FjdGlvbnM7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7dHJhbnNhY3Rpb25zLmxlbmd0aH0gdHJhbnNhY3Rpb25zIGZyb20gbWVtb3J5IGZvciAke25vcm1hbGl6ZWRXYWxsZXRBZGRyZXNzfWApO1xyXG4gICAgICAgICAgZm91bmRIaXN0b3J5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIElmIHdlIHN0aWxsIGRvbid0IGhhdmUgaGlzdG9yeSwgdGhpcyBpcyBhIG5ldyB1c2VyXHJcbiAgICAgIGlmICghZm91bmRIaXN0b3J5KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHRyYW5zYWN0aW9uIGhpc3RvcnkgZm91bmQgZm9yIHRoaXMgd2FsbGV0IGFkZHJlc3MnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogJ05vIHRyYW5zYWN0aW9uIGhpc3RvcnkgZm91bmQgZm9yIHRoaXMgd2FsbGV0IGFkZHJlc3MgLSB0aGlzIGFwcGVhcnMgdG8gYmUgYSBuZXcgdXNlcicsXHJcbiAgICAgICAgICBpc05ld1VzZXI6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJldHJpZXZpbmcgaGlzdG9yeTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGBFcnJvciByZXRyaWV2aW5nIHRyYW5zYWN0aW9uIGhpc3Rvcnk6ICR7ZXJyb3IubWVzc2FnZX1gXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICB3YWxsZXRBZGRyZXNzLFxyXG4gICAgICB0cmFuc2FjdGlvbnMsXHJcbiAgICAgIGRlYnVnOiB7XHJcbiAgICAgICAgaGFzSXBmc0hhc2g6ICEhZ2xvYmFsLnVzZXJIaXN0b3J5Q2lkcz8uW3dhbGxldEFkZHJlc3MudG9Mb3dlckNhc2UoKV0sXHJcbiAgICAgICAgaGFzVHJhbnNhY3Rpb25zOiAhIWdsb2JhbC51c2VyVHJhbnNhY3Rpb25zPy5bd2FsbGV0QWRkcmVzcy50b0xvd2VyQ2FzZSgpXSxcclxuICAgICAgICB0cmFuc2FjdGlvbkNvdW50OiB0cmFuc2FjdGlvbnMubGVuZ3RoXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdQaW5hdGEgcmV0cmlldmFsIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogYEZhaWxlZCB0byByZXRyaWV2ZSB0cmFuc2FjdGlvbiBoaXN0b3J5OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgc3RhY2s6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiYXhpb3MiLCJKV1QiLCJwcm9jZXNzIiwiZW52IiwiUElOQVRBX0pXVCIsIlBJTkFUQV9BUElfS0VZIiwiUElOQVRBX0FQSV9TRUNSRVQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsIndhbGxldEFkZHJlc3MiLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJ0cmFuc2FjdGlvbnMiLCJmb3VuZEhpc3RvcnkiLCJub3JtYWxpemVkV2FsbGV0QWRkcmVzcyIsInRvTG93ZXJDYXNlIiwiaXBmc0hhc2giLCJnbG9iYWwiLCJ1c2VySGlzdG9yeUNpZHMiLCJnYXRld2F5VXJsIiwicmVzcG9uc2UiLCJnZXQiLCJkYXRhIiwibGVuZ3RoIiwidXNlclRyYW5zYWN0aW9ucyIsImZpbHRlcmVkVHJhbnNhY3Rpb25zIiwiZmlsdGVyIiwidHgiLCJpc05ld1VzZXIiLCJtZXNzYWdlIiwiZGVidWciLCJoYXNJcGZzSGFzaCIsImhhc1RyYW5zYWN0aW9ucyIsInRyYW5zYWN0aW9uQ291bnQiLCJzdGFjayIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/pinata/history.js\n");

/***/ }),

/***/ "axios?daaa":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fpinata%2Fhistory&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cpinata%5Chistory.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();