"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/register";
exports.ids = ["pages/api/auth/register"];
exports.modules = {

/***/ "(api-node)/./lib/auth-service.js":
/*!*****************************!*\
  !*** ./lib/auth-service.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authService: () => (/* binding */ authService)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/pinata-service */ \"(api-node)/./lib/services/pinata-service.js\");\n/* harmony import */ var _services_pinata_service__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_services_pinata_service__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_0__]);\nbcryptjs__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/**\r\n * Authentication service using Pinata IPFS for credential storage\r\n */ \n\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n// Helper function to generate unique IDs\nfunction generateUserId() {\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\n// Prefix for user storage in Pinata\nconst USER_PREFIX = 'user_auth';\nconst authService = {\n    /**\r\n   * Register a new user with email and password\r\n   * @param {Object} userData - User data including credentials\r\n   * @returns {Promise<Object>} - User object and JWT token\r\n   */ async registerUser (userData) {\n        try {\n            const { firstName, lastName, email, password } = userData;\n            // Basic validation\n            if (!firstName || !lastName || !email || !password) {\n                throw new Error('All fields are required');\n            }\n            // Check if user exists by retrieving all users with same email\n            const existingUser = await this.findUserByEmail(email);\n            if (existingUser) {\n                throw new Error('User already exists with this email');\n            }\n            // Generate a user ID\n            const userId = generateUserId();\n            // Hash the password\n            const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, 10);\n            // Create user object\n            const user = {\n                _id: userId,\n                userId: userId,\n                firstName,\n                lastName,\n                email,\n                password: hashedPassword,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n                type: 'user_auth'\n            };\n            // Store user data in Pinata\n            const pinataResponse = await _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__.pinataService.storeData(`${USER_PREFIX}_${userId}`, user, {\n                userId,\n                type: 'user_auth',\n                email\n            });\n            console.log(`User registered with ID: ${userId}, IPFS Hash: ${pinataResponse.IpfsHash}`);\n            // Create JWT token\n            const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                userId,\n                email\n            }, JWT_SECRET, {\n                expiresIn: '7d'\n            });\n            // Return user info and token (exclude password)\n            const { password: _, ...userInfo } = user;\n            return {\n                token,\n                user: {\n                    ...userInfo,\n                    ipfsHash: pinataResponse.IpfsHash\n                }\n            };\n        } catch (error) {\n            console.error('Error registering user in Pinata:', error);\n            throw error;\n        }\n    },\n    /**\r\n   * Login a user with email and password\r\n   * @param {string} email - User email\r\n   * @param {string} password - User password\r\n   * @returns {Promise<Object>} - User object and JWT token\r\n   */ async loginUser (email, password) {\n        try {\n            // Find user by email\n            const user = await this.findUserByEmail(email);\n            if (!user) {\n                throw new Error('Invalid email or password');\n            }\n            // Compare password\n            const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, user.password);\n            if (!isPasswordValid) {\n                throw new Error('Invalid email or password');\n            }\n            // Create token\n            const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n                userId: user._id,\n                email: user.email\n            }, JWT_SECRET, {\n                expiresIn: '7d'\n            });\n            // Return user info and token (exclude password)\n            const { password: _, ...userInfo } = user;\n            return {\n                token,\n                user: userInfo\n            };\n        } catch (error) {\n            console.error('Error logging in user from Pinata:', error);\n            throw error;\n        }\n    },\n    /**\r\n   * Find a user by email in Pinata storage\r\n   * @param {string} email - User email\r\n   * @returns {Promise<Object|null>} - User object or null if not found\r\n   */ async findUserByEmail (email) {\n        try {\n            // Get all pins from Pinata\n            const pins = await _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__.pinataService.getAllPins();\n            // Find the user pin with matching email in metadata\n            const userPin = pins.find((pin)=>{\n                const metadata = pin.metadata?.keyvalues;\n                return metadata?.type === 'user_auth' && metadata?.email === email;\n            });\n            if (!userPin) {\n                return null;\n            }\n            // Get user data from Pinata\n            const userData = await _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__.pinataService.getData(userPin.ipfs_pin_hash);\n            if (!userData) {\n                return null;\n            }\n            // Add IPFS hash to user data\n            return {\n                ...userData,\n                ipfsHash: userPin.ipfs_pin_hash\n            };\n        } catch (error) {\n            console.error('Error finding user by email in Pinata:', error);\n            return null;\n        }\n    },\n    /**\r\n   * Verify a JWT token and get user data\r\n   * @param {string} token - JWT token\r\n   * @returns {Promise<Object>} - Decoded token and user data\r\n   */ async verifyToken (token) {\n        try {\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n            const userId = decoded.userId;\n            // Get user data from Pinata\n            const pins = await _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__.pinataService.getHistory(userId);\n            const userPin = pins.find((pin)=>{\n                const metadata = pin.metadata?.keyvalues;\n                return metadata?.type === 'user_auth' && metadata?.userId === userId;\n            });\n            if (!userPin) {\n                throw new Error('User not found');\n            }\n            const userData = await _services_pinata_service__WEBPACK_IMPORTED_MODULE_2__.pinataService.getData(userPin.ipfs_pin_hash);\n            if (!userData) {\n                throw new Error('User data not found');\n            }\n            // Remove password from user data\n            const { password, ...userInfo } = userData;\n            return {\n                decoded,\n                user: {\n                    ...userInfo,\n                    ipfsHash: userPin.ipfs_pin_hash\n                }\n            };\n        } catch (error) {\n            console.error('Error verifying token:', error);\n            throw error;\n        }\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0QsVUFBVSxDQUFDcEM7WUFFNUMsTUFBTTBCLFVBQVVGLEtBQUtHLElBQUksQ0FBQ0MsQ0FBQUE7Z0JBQ3hCLE1BQU1DLFdBQVdELElBQUlDLFFBQVEsRUFBRUM7Z0JBQy9CLE9BQU9ELFVBQVVyQixTQUFTLGVBQ25CcUIsVUFBVTdCLFdBQVdBO1lBQzlCO1lBRUEsSUFBSSxDQUFDMEIsU0FBUztnQkFDWixNQUFNLElBQUk3QixNQUFNO1lBQ2xCO1lBRUEsTUFBTUwsV0FBVyxNQUFNWixtRUFBYUEsQ0FBQ21ELE9BQU8sQ0FBQ0wsUUFBUU0sYUFBYTtZQUNsRSxJQUFJLENBQUN4QyxVQUFVO2dCQUNiLE1BQU0sSUFBSUssTUFBTTtZQUNsQjtZQUVBLGlDQUFpQztZQUNqQyxNQUFNLEVBQUVELFFBQVEsRUFBRSxHQUFHc0IsVUFBVSxHQUFHMUI7WUFFbEMsT0FBTztnQkFDTDBDO2dCQUNBL0IsTUFBTTtvQkFDSixHQUFHZSxRQUFRO29CQUNYQyxVQUFVTyxRQUFRTSxhQUFhO2dCQUNqQztZQUNGO1FBQ0YsRUFBRSxPQUFPWixPQUFPO1lBQ2RULFFBQVFTLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU1BO1FBQ1I7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcRGVraHRlIGhhaVxcbmV1cm9TeW5jXFxOZXVyb1N5bmMtQUktRnJvbnRlbmRcXGxpYlxcYXV0aC1zZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBdXRoZW50aWNhdGlvbiBzZXJ2aWNlIHVzaW5nIFBpbmF0YSBJUEZTIGZvciBjcmVkZW50aWFsIHN0b3JhZ2VcclxuICovXHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB7IHBpbmF0YVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3BpbmF0YS1zZXJ2aWNlJztcclxuXHJcbmNvbnN0IEpXVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICd5b3VyLXNlY3JldC1rZXknO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIHVuaXF1ZSBJRHNcclxuZnVuY3Rpb24gZ2VuZXJhdGVVc2VySWQoKSB7XHJcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSkgKyBcclxuICAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcclxufVxyXG5cclxuLy8gUHJlZml4IGZvciB1c2VyIHN0b3JhZ2UgaW4gUGluYXRhXHJcbmNvbnN0IFVTRVJfUFJFRklYID0gJ3VzZXJfYXV0aCc7XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aFNlcnZpY2UgPSB7XHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgYSBuZXcgdXNlciB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZFxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB1c2VyRGF0YSAtIFVzZXIgZGF0YSBpbmNsdWRpbmcgY3JlZGVudGlhbHNcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSAtIFVzZXIgb2JqZWN0IGFuZCBKV1QgdG9rZW5cclxuICAgKi9cclxuICBhc3luYyByZWdpc3RlclVzZXIodXNlckRhdGEpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSB1c2VyRGF0YTtcclxuICAgICAgXHJcbiAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cclxuICAgICAgaWYgKCFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lIHx8ICFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgZXhpc3RzIGJ5IHJldHJpZXZpbmcgYWxsIHVzZXJzIHdpdGggc2FtZSBlbWFpbFxyXG4gICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCB0aGlzLmZpbmRVc2VyQnlFbWFpbChlbWFpbCk7XHJcbiAgICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGlzIGVtYWlsJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEdlbmVyYXRlIGEgdXNlciBJRFxyXG4gICAgICBjb25zdCB1c2VySWQgPSBnZW5lcmF0ZVVzZXJJZCgpO1xyXG4gICAgICBcclxuICAgICAgLy8gSGFzaCB0aGUgcGFzc3dvcmRcclxuICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIHVzZXIgb2JqZWN0XHJcbiAgICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgICAgX2lkOiB1c2VySWQsXHJcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgICAgZmlyc3ROYW1lLFxyXG4gICAgICAgIGxhc3ROYW1lLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHR5cGU6ICd1c2VyX2F1dGgnXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBTdG9yZSB1c2VyIGRhdGEgaW4gUGluYXRhXHJcbiAgICAgIGNvbnN0IHBpbmF0YVJlc3BvbnNlID0gYXdhaXQgcGluYXRhU2VydmljZS5zdG9yZURhdGEoXHJcbiAgICAgICAgYCR7VVNFUl9QUkVGSVh9XyR7dXNlcklkfWAsXHJcbiAgICAgICAgdXNlcixcclxuICAgICAgICB7XHJcbiAgICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgICB0eXBlOiAndXNlcl9hdXRoJyxcclxuICAgICAgICAgIGVtYWlsIC8vIFN0b3JlIGVtYWlsIGluIG1ldGFkYXRhIGZvciBzZWFyY2hhYmlsaXR5XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFVzZXIgcmVnaXN0ZXJlZCB3aXRoIElEOiAke3VzZXJJZH0sIElQRlMgSGFzaDogJHtwaW5hdGFSZXNwb25zZS5JcGZzSGFzaH1gKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENyZWF0ZSBKV1QgdG9rZW5cclxuICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbihcclxuICAgICAgICB7IHVzZXJJZCwgZW1haWwgfSxcclxuICAgICAgICBKV1RfU0VDUkVULFxyXG4gICAgICAgIHsgZXhwaXJlc0luOiAnN2QnIH1cclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFJldHVybiB1c2VyIGluZm8gYW5kIHRva2VuIChleGNsdWRlIHBhc3N3b3JkKVxyXG4gICAgICBjb25zdCB7IHBhc3N3b3JkOiBfLCAuLi51c2VySW5mbyB9ID0gdXNlcjtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAuLi51c2VySW5mbyxcclxuICAgICAgICAgIGlwZnNIYXNoOiBwaW5hdGFSZXNwb25zZS5JcGZzSGFzaFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZ2lzdGVyaW5nIHVzZXIgaW4gUGluYXRhOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICAvKipcclxuICAgKiBMb2dpbiBhIHVzZXIgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBVc2VyIGVtYWlsXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVXNlciBwYXNzd29yZFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IC0gVXNlciBvYmplY3QgYW5kIEpXVCB0b2tlblxyXG4gICAqL1xyXG4gIGFzeW5jIGxvZ2luVXNlcihlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEZpbmQgdXNlciBieSBlbWFpbFxyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kVXNlckJ5RW1haWwoZW1haWwpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIENvbXBhcmUgcGFzc3dvcmRcclxuICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFpc1Bhc3N3b3JkVmFsaWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW1haWwgb3IgcGFzc3dvcmQnKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIHRva2VuXHJcbiAgICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oXHJcbiAgICAgICAgeyB1c2VySWQ6IHVzZXIuX2lkLCBlbWFpbDogdXNlci5lbWFpbCB9LFxyXG4gICAgICAgIEpXVF9TRUNSRVQsXHJcbiAgICAgICAgeyBleHBpcmVzSW46ICc3ZCcgfVxyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gUmV0dXJuIHVzZXIgaW5mbyBhbmQgdG9rZW4gKGV4Y2x1ZGUgcGFzc3dvcmQpXHJcbiAgICAgIGNvbnN0IHsgcGFzc3dvcmQ6IF8sIC4uLnVzZXJJbmZvIH0gPSB1c2VyO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIHVzZXI6IHVzZXJJbmZvXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2dnaW5nIGluIHVzZXIgZnJvbSBQaW5hdGE6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEZpbmQgYSB1c2VyIGJ5IGVtYWlsIGluIFBpbmF0YSBzdG9yYWdlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gVXNlciBlbWFpbFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gLSBVc2VyIG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZFxyXG4gICAqL1xyXG4gIGFzeW5jIGZpbmRVc2VyQnlFbWFpbChlbWFpbCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IGFsbCBwaW5zIGZyb20gUGluYXRhXHJcbiAgICAgIGNvbnN0IHBpbnMgPSBhd2FpdCBwaW5hdGFTZXJ2aWNlLmdldEFsbFBpbnMoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZpbmQgdGhlIHVzZXIgcGluIHdpdGggbWF0Y2hpbmcgZW1haWwgaW4gbWV0YWRhdGFcclxuICAgICAgY29uc3QgdXNlclBpbiA9IHBpbnMuZmluZChwaW4gPT4ge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcGluLm1ldGFkYXRhPy5rZXl2YWx1ZXM7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhPy50eXBlID09PSAndXNlcl9hdXRoJyAmJiBcclxuICAgICAgICAgICAgICAgbWV0YWRhdGE/LmVtYWlsID09PSBlbWFpbDtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXVzZXJQaW4pIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gR2V0IHVzZXIgZGF0YSBmcm9tIFBpbmF0YVxyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IHBpbmF0YVNlcnZpY2UuZ2V0RGF0YSh1c2VyUGluLmlwZnNfcGluX2hhc2gpO1xyXG4gICAgICBpZiAoIXVzZXJEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEFkZCBJUEZTIGhhc2ggdG8gdXNlciBkYXRhXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4udXNlckRhdGEsXHJcbiAgICAgICAgaXBmc0hhc2g6IHVzZXJQaW4uaXBmc19waW5faGFzaFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmluZGluZyB1c2VyIGJ5IGVtYWlsIGluIFBpbmF0YTonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVmVyaWZ5IGEgSldUIHRva2VuIGFuZCBnZXQgdXNlciBkYXRhXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gSldUIHRva2VuXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSBEZWNvZGVkIHRva2VuIGFuZCB1c2VyIGRhdGFcclxuICAgKi9cclxuICBhc3luYyB2ZXJpZnlUb2tlbih0b2tlbikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xyXG4gICAgICBjb25zdCB1c2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCB1c2VyIGRhdGEgZnJvbSBQaW5hdGFcclxuICAgICAgY29uc3QgcGlucyA9IGF3YWl0IHBpbmF0YVNlcnZpY2UuZ2V0SGlzdG9yeSh1c2VySWQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdXNlclBpbiA9IHBpbnMuZmluZChwaW4gPT4ge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcGluLm1ldGFkYXRhPy5rZXl2YWx1ZXM7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhPy50eXBlID09PSAndXNlcl9hdXRoJyAmJiBcclxuICAgICAgICAgICAgICAgbWV0YWRhdGE/LnVzZXJJZCA9PT0gdXNlcklkO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmICghdXNlclBpbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBwaW5hdGFTZXJ2aWNlLmdldERhdGEodXNlclBpbi5pcGZzX3Bpbl9oYXNoKTtcclxuICAgICAgaWYgKCF1c2VyRGF0YSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBkYXRhIG5vdCBmb3VuZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBSZW1vdmUgcGFzc3dvcmQgZnJvbSB1c2VyIGRhdGFcclxuICAgICAgY29uc3QgeyBwYXNzd29yZCwgLi4udXNlckluZm8gfSA9IHVzZXJEYXRhO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkZWNvZGVkLFxyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIC4uLnVzZXJJbmZvLFxyXG4gICAgICAgICAgaXBmc0hhc2g6IHVzZXJQaW4uaXBmc19waW5faGFzaFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyB0b2tlbjonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufTsgIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsInBpbmF0YVNlcnZpY2UiLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsImdlbmVyYXRlVXNlcklkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiVVNFUl9QUkVGSVgiLCJhdXRoU2VydmljZSIsInJlZ2lzdGVyVXNlciIsInVzZXJEYXRhIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiRXJyb3IiLCJleGlzdGluZ1VzZXIiLCJmaW5kVXNlckJ5RW1haWwiLCJ1c2VySWQiLCJoYXNoZWRQYXNzd29yZCIsImhhc2giLCJ1c2VyIiwiX2lkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInR5cGUiLCJwaW5hdGFSZXNwb25zZSIsInN0b3JlRGF0YSIsImNvbnNvbGUiLCJsb2ciLCJJcGZzSGFzaCIsInRva2VuIiwic2lnbiIsImV4cGlyZXNJbiIsIl8iLCJ1c2VySW5mbyIsImlwZnNIYXNoIiwiZXJyb3IiLCJsb2dpblVzZXIiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwicGlucyIsImdldEFsbFBpbnMiLCJ1c2VyUGluIiwiZmluZCIsInBpbiIsIm1ldGFkYXRhIiwia2V5dmFsdWVzIiwiZ2V0RGF0YSIsImlwZnNfcGluX2hhc2giLCJ2ZXJpZnlUb2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJnZXRIaXN0b3J5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth-service.js\n");

/***/ }),

/***/ "(api-node)/./lib/services/pinata-service.js":
/*!****************************************!*\
  !*** ./lib/services/pinata-service.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst axios = __webpack_require__(/*! axios */ \"axios?6fac\");\n/**\r\n * Pinata IPFS Service\r\n * Handles storing and retrieving data from Pinata IPFS\r\n */ class PinataService {\n    constructor(){\n        this.apiKey = process.env.PINATA_API_KEY;\n        this.apiSecret = process.env.PINATA_API_SECRET;\n        this.jwt = process.env.PINATA_JWT;\n        this.apiUrl = 'https://api.pinata.cloud';\n        this.gateway = 'https://gateway.pinata.cloud/ipfs/';\n    }\n    /**\r\n   * Check if the Pinata credentials are configured\r\n   */ isConfigured() {\n        return !!(this.jwt || this.apiKey && this.apiSecret);\n    }\n    /**\r\n   * Get the headers for Pinata API requests\r\n   */ getHeaders() {\n        if (this.jwt) {\n            return {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.jwt}`\n            };\n        } else if (this.apiKey && this.apiSecret) {\n            return {\n                'Content-Type': 'application/json',\n                'pinata_api_key': this.apiKey,\n                'pinata_secret_api_key': this.apiSecret\n            };\n        } else {\n            throw new Error('Pinata credentials not configured');\n        }\n    }\n    /**\r\n   * Store data on Pinata IPFS\r\n   * @param {string} keyName - Unique key for the data\r\n   * @param {object} data - Data to store\r\n   * @param {object} metadata - Optional metadata for the pin\r\n   * @returns {Promise<object>} - Response from Pinata\r\n   */ async storeData(keyName, data, metadata = {}) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            // Generate a unique identifier for the transaction\n            const uniqueId = `${keyName}_${Date.now()}`;\n            // Prepare the data for Pinata\n            const pinataBody = {\n                pinataContent: data,\n                pinataMetadata: {\n                    name: uniqueId,\n                    keyvalues: {\n                        userId: data.userId || 'anonymous',\n                        type: data.type || 'conversation',\n                        timestamp: Date.now(),\n                        ...metadata\n                    }\n                }\n            };\n            // Upload to Pinata\n            const response = await axios.post(`${this.apiUrl}/pinning/pinJSONToIPFS`, pinataBody, {\n                headers: this.getHeaders()\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Failed to store data on Pinata:', error?.response?.data || error?.message || error);\n            throw error;\n        }\n    }\n    /**\r\n   * Get data from Pinata IPFS\r\n   * @param {string} ipfsHash - IPFS hash to retrieve\r\n   * @returns {Promise<object>} - Retrieved data\r\n   */ async getData(ipfsHash) {\n        try {\n            if (!ipfsHash) {\n                throw new Error('IPFS hash is required');\n            }\n            // Fetch data from Pinata Gateway\n            const response = await axios.get(`${this.gateway}${ipfsHash}`);\n            return response.data;\n        } catch (error) {\n            console.error(`Failed to get data from Pinata (${ipfsHash}):`, error?.message || error);\n            return null;\n        }\n    }\n    /**\r\n   * Get history of pins for a user\r\n   * @param {string} userId - User ID to get history for\r\n   * @returns {Promise<Array>} - Array of pins\r\n   */ async getHistory(userId) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            if (!userId) {\n                return [];\n            }\n            // Query Pinata for pins with the user's ID\n            const response = await axios.get(`${this.apiUrl}/data/pinList?metadata[keyvalues][userId]={\"value\":\"${userId}\",\"op\":\"eq\"}&status=pinned`, {\n                headers: this.getHeaders()\n            });\n            return response.data.rows || [];\n        } catch (error) {\n            console.error(`Failed to get history from Pinata for user ${userId}:`, error?.response?.data || error?.message || error);\n            return [];\n        }\n    }\n    /**\r\n   * Remove data from Pinata IPFS\r\n   * @param {string} ipfsHash - IPFS hash to remove\r\n   * @returns {Promise<object>} - Response from Pinata\r\n   */ async removeData(ipfsHash) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            if (!ipfsHash) {\n                throw new Error('IPFS hash is required');\n            }\n            // Unpin from Pinata\n            const response = await axios.delete(`${this.apiUrl}/pinning/unpin/${ipfsHash}`, {\n                headers: this.getHeaders()\n            });\n            return {\n                success: true,\n                data: response.data\n            };\n        } catch (error) {\n            console.error(`Failed to remove data from Pinata (${ipfsHash}):`, error?.response?.data || error?.message || error);\n            // Handle common Pinata error cases: \n            // 1. 404 - Pin doesn't exist\n            // 2. 400 with \"CURRENT_USER_HAS_NOT_PINNED_CID\" - User doesn't have permission to unpin\n            if (error?.response?.status === 404 || error?.response?.status === 400 && error?.response?.data?.error?.reason === 'CURRENT_USER_HAS_NOT_PINNED_CID') {\n                console.log(`Pin ${ipfsHash} not found or not owned by current user. Considering it removed.`);\n                return {\n                    success: true,\n                    message: 'Pin not found or not owned by current user'\n                };\n            }\n            throw error;\n        }\n    }\n    /**\r\n   * Test the Pinata connection\r\n   * @returns {Promise<boolean>} - Whether the connection was successful\r\n   */ async testConnection() {\n        try {\n            if (!this.isConfigured()) {\n                return false;\n            }\n            // Test the connection by getting the pin count\n            await axios.get(`${this.apiUrl}/data/userPinnedDataTotal`, {\n                headers: this.getHeaders()\n            });\n            return true;\n        } catch (error) {\n            console.error('Pinata connection test failed:', error?.response?.data || error?.message || error);\n            return false;\n        }\n    }\n    /**\r\n   * Get all pins from Pinata regardless of user ID\r\n   * @returns {Promise<Array>} - Array of pins\r\n   */ async getAllPins() {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            // Query Pinata for all pins\n            const response = await axios.get(`${this.apiUrl}/data/pinList?status=pinned`, {\n                headers: this.getHeaders()\n            });\n            return response.data.rows || [];\n        } catch (error) {\n            console.error(`Failed to get all pins from Pinata:`, error?.response?.data || error?.message || error);\n            return [];\n        }\n    }\n}\nconst pinataService = new PinataService();\nmodule.exports = {\n    pinataService\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9zZXJ2aWNlcy9waW5hdGEtc2VydmljZS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsUUFBUUMsbUJBQU9BLENBQUMseUJBQU87QUFFN0I7OztDQUdDLEdBQ0QsTUFBTUM7SUFDSkMsYUFBYztRQUNaLElBQUksQ0FBQ0MsTUFBTSxHQUFHQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7UUFDeEMsSUFBSSxDQUFDQyxTQUFTLEdBQUdILFFBQVFDLEdBQUcsQ0FBQ0csaUJBQWlCO1FBQzlDLElBQUksQ0FBQ0MsR0FBRyxHQUFHTCxRQUFRQyxHQUFHLENBQUNLLFVBQVU7UUFDakMsSUFBSSxDQUFDQyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBRztJQUNqQjtJQUVBOztHQUVDLEdBQ0RDLGVBQWU7UUFDYixPQUFPLENBQUMsQ0FBRSxLQUFJLENBQUNKLEdBQUcsSUFBSyxJQUFJLENBQUNOLE1BQU0sSUFBSSxJQUFJLENBQUNJLFNBQVM7SUFDdEQ7SUFFQTs7R0FFQyxHQUNETyxhQUFhO1FBQ1gsSUFBSSxJQUFJLENBQUNMLEdBQUcsRUFBRTtZQUNaLE9BQU87Z0JBQ0wsZ0JBQWdCO2dCQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDQSxHQUFHLEVBQUU7WUFDdkM7UUFDRixPQUFPLElBQUksSUFBSSxDQUFDTixNQUFNLElBQUksSUFBSSxDQUFDSSxTQUFTLEVBQUU7WUFDeEMsT0FBTztnQkFDTCxnQkFBZ0I7Z0JBQ2hCLGtCQUFrQixJQUFJLENBQUNKLE1BQU07Z0JBQzdCLHlCQUF5QixJQUFJLENBQUNJLFNBQVM7WUFDekM7UUFDRixPQUFPO1lBQ0wsTUFBTSxJQUFJUSxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQTs7Ozs7O0dBTUMsR0FDRCxNQUFNQyxVQUFVQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxDQUFDLENBQUMsRUFBRTtRQUM1QyxJQUFJO1lBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ04sWUFB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QUFVO1lBQUc7WUFHL0IsT0FBT2lCLFNBQVNiLElBQUksQ0FBQ3VCLElBQUksSUFBSSxFQUFFO1FBQ2pDLEVBQUUsT0FBT1AsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxtQ0FBbUMsQ0FBQyxFQUFFQSxPQUFPSCxVQUFVYixRQUFRZ0IsT0FBT0UsV0FBV0Y7WUFDaEcsT0FBTyxFQUFFO1FBQ1g7SUFDRjtBQUNGO0FBRUEsTUFBTWdCLGdCQUFnQixJQUFJakQ7QUFFMUJrRCxPQUFPQyxPQUFPLEdBQUc7SUFBRUY7QUFBYyIsInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxEZWtodGUgaGFpXFxuZXVyb1N5bmNcXE5ldXJvU3luYy1BSS1Gcm9udGVuZFxcbGliXFxzZXJ2aWNlc1xccGluYXRhLXNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xyXG5cclxuLyoqXHJcbiAqIFBpbmF0YSBJUEZTIFNlcnZpY2VcclxuICogSGFuZGxlcyBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIGRhdGEgZnJvbSBQaW5hdGEgSVBGU1xyXG4gKi9cclxuY2xhc3MgUGluYXRhU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmFwaUtleSA9IHByb2Nlc3MuZW52LlBJTkFUQV9BUElfS0VZO1xyXG4gICAgdGhpcy5hcGlTZWNyZXQgPSBwcm9jZXNzLmVudi5QSU5BVEFfQVBJX1NFQ1JFVDtcclxuICAgIHRoaXMuand0ID0gcHJvY2Vzcy5lbnYuUElOQVRBX0pXVDtcclxuICAgIHRoaXMuYXBpVXJsID0gJ2h0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZCc7XHJcbiAgICB0aGlzLmdhdGV3YXkgPSAnaHR0cHM6Ly9nYXRld2F5LnBpbmF0YS5jbG91ZC9pcGZzLyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiB0aGUgUGluYXRhIGNyZWRlbnRpYWxzIGFyZSBjb25maWd1cmVkXHJcbiAgICovXHJcbiAgaXNDb25maWd1cmVkKCkge1xyXG4gICAgcmV0dXJuICEhKHRoaXMuand0IHx8ICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaVNlY3JldCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBoZWFkZXJzIGZvciBQaW5hdGEgQVBJIHJlcXVlc3RzXHJcbiAgICovXHJcbiAgZ2V0SGVhZGVycygpIHtcclxuICAgIGlmICh0aGlzLmp3dCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5qd3R9YFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaVNlY3JldCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3BpbmF0YV9hcGlfa2V5JzogdGhpcy5hcGlLZXksXHJcbiAgICAgICAgJ3BpbmF0YV9zZWNyZXRfYXBpX2tleSc6IHRoaXMuYXBpU2VjcmV0XHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BpbmF0YSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmUgZGF0YSBvbiBQaW5hdGEgSVBGU1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlOYW1lIC0gVW5pcXVlIGtleSBmb3IgdGhlIGRhdGFcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIERhdGEgdG8gc3RvcmVcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBPcHRpb25hbCBtZXRhZGF0YSBmb3IgdGhlIHBpblxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59IC0gUmVzcG9uc2UgZnJvbSBQaW5hdGFcclxuICAgKi9cclxuICBhc3luYyBzdG9yZURhdGEoa2V5TmFtZSwgZGF0YSwgbWV0YWRhdGEgPSB7fSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0aGlzLmlzQ29uZmlndXJlZCgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5hdGEgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRyYW5zYWN0aW9uXHJcbiAgICAgIGNvbnN0IHVuaXF1ZUlkID0gYCR7a2V5TmFtZX1fJHtEYXRlLm5vdygpfWA7XHJcbiAgICAgIFxyXG4gICAgICAvLyBQcmVwYXJlIHRoZSBkYXRhIGZvciBQaW5hdGFcclxuICAgICAgY29uc3QgcGluYXRhQm9keSA9IHtcclxuICAgICAgICBwaW5hdGFDb250ZW50OiBkYXRhLFxyXG4gICAgICAgIHBpbmF0YU1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBuYW1lOiB1bmlxdWVJZCxcclxuICAgICAgICAgIGtleXZhbHVlczoge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkIHx8ICdhbm9ueW1vdXMnLFxyXG4gICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUgfHwgJ2NvbnZlcnNhdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgLi4ubWV0YWRhdGFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBVcGxvYWQgdG8gUGluYXRhXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vcGlubmluZy9waW5KU09OVG9JUEZTYCxcclxuICAgICAgICBwaW5hdGFCb2R5LFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCkgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RvcmUgZGF0YSBvbiBQaW5hdGE6JywgZXJyb3I/LnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yPy5tZXNzYWdlIHx8IGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZGF0YSBmcm9tIFBpbmF0YSBJUEZTXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlwZnNIYXNoIC0gSVBGUyBoYXNoIHRvIHJldHJpZXZlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gLSBSZXRyaWV2ZWQgZGF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldERhdGEoaXBmc0hhc2gpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghaXBmc0hhc2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lQRlMgaGFzaCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGZXRjaCBkYXRhIGZyb20gUGluYXRhIEdhdGV3YXlcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7dGhpcy5nYXRld2F5fSR7aXBmc0hhc2h9YCk7XHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gUGluYXRhICgke2lwZnNIYXNofSk6YCwgZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBoaXN0b3J5IG9mIHBpbnMgZm9yIGEgdXNlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEIHRvIGdldCBoaXN0b3J5IGZvclxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gLSBBcnJheSBvZiBwaW5zXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0SGlzdG9yeSh1c2VySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBRdWVyeSBQaW5hdGEgZm9yIHBpbnMgd2l0aCB0aGUgdXNlcidzIElEXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxyXG4gICAgICAgIGAke3RoaXMuYXBpVXJsfS9kYXRhL3Bpbkxpc3Q/bWV0YWRhdGFba2V5dmFsdWVzXVt1c2VySWRdPXtcInZhbHVlXCI6XCIke3VzZXJJZH1cIixcIm9wXCI6XCJlcVwifSZzdGF0dXM9cGlubmVkYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJvd3MgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGhpc3RvcnkgZnJvbSBQaW5hdGEgZm9yIHVzZXIgJHt1c2VySWR9OmAsIGVycm9yPy5yZXNwb25zZT8uZGF0YSB8fCBlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBkYXRhIGZyb20gUGluYXRhIElQRlNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXBmc0hhc2ggLSBJUEZTIGhhc2ggdG8gcmVtb3ZlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gLSBSZXNwb25zZSBmcm9tIFBpbmF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIHJlbW92ZURhdGEoaXBmc0hhc2gpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaXBmc0hhc2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lQRlMgaGFzaCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVbnBpbiBmcm9tIFBpbmF0YVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vcGlubmluZy91bnBpbi8ke2lwZnNIYXNofWAsXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXNwb25zZS5kYXRhIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVtb3ZlIGRhdGEgZnJvbSBQaW5hdGEgKCR7aXBmc0hhc2h9KTpgLCBlcnJvcj8ucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgLy8gSGFuZGxlIGNvbW1vbiBQaW5hdGEgZXJyb3IgY2FzZXM6IFxyXG4gICAgICAvLyAxLiA0MDQgLSBQaW4gZG9lc24ndCBleGlzdFxyXG4gICAgICAvLyAyLiA0MDAgd2l0aCBcIkNVUlJFTlRfVVNFUl9IQVNfTk9UX1BJTk5FRF9DSURcIiAtIFVzZXIgZG9lc24ndCBoYXZlIHBlcm1pc3Npb24gdG8gdW5waW5cclxuICAgICAgaWYgKGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID09PSA0MDQgfHwgXHJcbiAgICAgICAgICAoZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMCAmJiBcclxuICAgICAgICAgICBlcnJvcj8ucmVzcG9uc2U/LmRhdGE/LmVycm9yPy5yZWFzb24gPT09ICdDVVJSRU5UX1VTRVJfSEFTX05PVF9QSU5ORURfQ0lEJykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUGluICR7aXBmc0hhc2h9IG5vdCBmb3VuZCBvciBub3Qgb3duZWQgYnkgY3VycmVudCB1c2VyLiBDb25zaWRlcmluZyBpdCByZW1vdmVkLmApO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdQaW4gbm90IGZvdW5kIG9yIG5vdCBvd25lZCBieSBjdXJyZW50IHVzZXInIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB0aGUgUGluYXRhIGNvbm5lY3Rpb25cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICovXHJcbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXRoaXMuaXNDb25maWd1cmVkKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb24gYnkgZ2V0dGluZyB0aGUgcGluIGNvdW50XHJcbiAgICAgIGF3YWl0IGF4aW9zLmdldChcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vZGF0YS91c2VyUGlubmVkRGF0YVRvdGFsYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUGluYXRhIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3I/LnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yPy5tZXNzYWdlIHx8IGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBwaW5zIGZyb20gUGluYXRhIHJlZ2FyZGxlc3Mgb2YgdXNlciBJRFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gLSBBcnJheSBvZiBwaW5zXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWxsUGlucygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFF1ZXJ5IFBpbmF0YSBmb3IgYWxsIHBpbnNcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXHJcbiAgICAgICAgYCR7dGhpcy5hcGlVcmx9L2RhdGEvcGluTGlzdD9zdGF0dXM9cGlubmVkYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJvd3MgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGFsbCBwaW5zIGZyb20gUGluYXRhOmAsIGVycm9yPy5yZXNwb25zZT8uZGF0YSB8fCBlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHBpbmF0YVNlcnZpY2UgPSBuZXcgUGluYXRhU2VydmljZSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHBpbmF0YVNlcnZpY2UgfTsgIl0sIm5hbWVzIjpbImF4aW9zIiwicmVxdWlyZSIsIlBpbmF0YVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJQSU5BVEFfQVBJX0tFWSIsImFwaVNlY3JldCIsIlBJTkFUQV9BUElfU0VDUkVUIiwiand0IiwiUElOQVRBX0pXVCIsImFwaVVybCIsImdhdGV3YXkiLCJpc0NvbmZpZ3VyZWQiLCJnZXRIZWFkZXJzIiwiRXJyb3IiLCJzdG9yZURhdGEiLCJrZXlOYW1lIiwiZGF0YSIsIm1ldGFkYXRhIiwidW5pcXVlSWQiLCJEYXRlIiwibm93IiwicGluYXRhQm9keSIsInBpbmF0YUNvbnRlbnQiLCJwaW5hdGFNZXRhZGF0YSIsIm5hbWUiLCJrZXl2YWx1ZXMiLCJ1c2VySWQiLCJ0eXBlIiwidGltZXN0YW1wIiwicmVzcG9uc2UiLCJwb3N0IiwiaGVhZGVycyIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZXREYXRhIiwiaXBmc0hhc2giLCJnZXQiLCJnZXRIaXN0b3J5Iiwicm93cyIsInJlbW92ZURhdGEiLCJkZWxldGUiLCJzdWNjZXNzIiwic3RhdHVzIiwicmVhc29uIiwibG9nIiwidGVzdENvbm5lY3Rpb24iLCJnZXRBbGxQaW5zIiwicGluYXRhU2VydmljZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/services/pinata-service.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth\\register.js */ \"(api-node)/./pages/api/auth/register.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth/register\",\n        pathname: \"/api/auth/register\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_auth_register_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYXV0aCUyRnJlZ2lzdGVyJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNhdXRoJTVDcmVnaXN0ZXIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhdXRoXFxcXHJlZ2lzdGVyLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3JlZ2lzdGVyXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9yZWdpc3RlclwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/auth/register.js":
/*!************************************!*\
  !*** ./pages/api/auth/register.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_auth_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/auth-service */ \"(api-node)/./lib/auth-service.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_auth_service__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_auth_service__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            message: 'Method not allowed'\n        });\n    }\n    try {\n        const { firstName, lastName, email, password } = req.body;\n        // Basic validation\n        if (!firstName || !lastName || !email || !password) {\n            return res.status(400).json({\n                message: 'All fields are required'\n            });\n        }\n        // Register user with Pinata-based auth service\n        const result = await _lib_auth_service__WEBPACK_IMPORTED_MODULE_0__.authService.registerUser({\n            firstName,\n            lastName,\n            email,\n            password\n        });\n        res.status(201).json({\n            message: 'User registered successfully',\n            token: result.token,\n            user: {\n                id: result.user._id,\n                firstName: result.user.firstName,\n                lastName: result.user.lastName,\n                email: result.user.email\n            }\n        });\n    } catch (error) {\n        console.error('Registration error:', error);\n        // Return appropriate error message\n        if (error.message === 'User already exists with this email') {\n            return res.status(400).json({\n                message: error.message\n            });\n        }\n        res.status(500).json({\n            message: 'Internal server error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hdXRoL3JlZ2lzdGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBRXpDLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsS0FBSyxFQUFFQyxRQUFRLEVBQUUsR0FBR1QsSUFBSVUsSUFBSTtRQUV6RCxtQkFBbUI7UUFDbkIsSUFBSSxDQUFDSixhQUFhLENBQUNDLFlBQVksQ0FBQ0MsU0FBUyxDQUFDQyxVQUFVO1lBQ2xELE9BQU9SLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBMEI7UUFDbkU7UUFFQSwrQ0FBK0M7UUFDL0MsTUFBTU0sU0FBUyxNQUFNYiwwREFBV0EsQ0FBQ2MsWUFBWSxDQUFDO1lBQzVDTjtZQUNBQztZQUNBQztZQUNBQztRQUNGO1FBRUFSLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJDLFNBQVM7WUFDVFEsT0FBT0YsT0FBT0UsS0FBSztZQUNuQkMsTUFBTTtnQkFDSkMsSUFBSUosT0FBT0csSUFBSSxDQUFDRSxHQUFHO2dCQUNuQlYsV0FBV0ssT0FBT0csSUFBSSxDQUFDUixTQUFTO2dCQUNoQ0MsVUFBVUksT0FBT0csSUFBSSxDQUFDUCxRQUFRO2dCQUM5QkMsT0FBT0csT0FBT0csSUFBSSxDQUFDTixLQUFLO1lBQzFCO1FBQ0Y7SUFDRixFQUFFLE9BQU9TLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVCQUF1QkE7UUFFckMsbUNBQW1DO1FBQ25DLElBQUlBLE1BQU1aLE9BQU8sS0FBSyx1Q0FBdUM7WUFDM0QsT0FBT0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBU1ksTUFBTVosT0FBTztZQUFDO1FBQ3ZEO1FBRUFKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUF3QjtJQUMxRDtBQUNGIiwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXERla2h0ZSBoYWlcXG5ldXJvU3luY1xcTmV1cm9TeW5jLUFJLUZyb250ZW5kXFxwYWdlc1xcYXBpXFxhdXRoXFxyZWdpc3Rlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdXRoU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9hdXRoLXNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBCYXNpYyB2YWxpZGF0aW9uXHJcbiAgICBpZiAoIWZpcnN0TmFtZSB8fCAhbGFzdE5hbWUgfHwgIWVtYWlsIHx8ICFwYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAnQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlZ2lzdGVyIHVzZXIgd2l0aCBQaW5hdGEtYmFzZWQgYXV0aCBzZXJ2aWNlXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdXRoU2VydmljZS5yZWdpc3RlclVzZXIoe1xyXG4gICAgICBmaXJzdE5hbWUsXHJcbiAgICAgIGxhc3ROYW1lLFxyXG4gICAgICBlbWFpbCxcclxuICAgICAgcGFzc3dvcmRcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ1VzZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICB0b2tlbjogcmVzdWx0LnRva2VuLFxyXG4gICAgICB1c2VyOiB7XHJcbiAgICAgICAgaWQ6IHJlc3VsdC51c2VyLl9pZCxcclxuICAgICAgICBmaXJzdE5hbWU6IHJlc3VsdC51c2VyLmZpcnN0TmFtZSxcclxuICAgICAgICBsYXN0TmFtZTogcmVzdWx0LnVzZXIubGFzdE5hbWUsXHJcbiAgICAgICAgZW1haWw6IHJlc3VsdC51c2VyLmVtYWlsXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSZWdpc3RyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBSZXR1cm4gYXBwcm9wcmlhdGUgZXJyb3IgbWVzc2FnZVxyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdVc2VyIGFscmVhZHkgZXhpc3RzIHdpdGggdGhpcyBlbWFpbCcpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbImF1dGhTZXJ2aWNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiYm9keSIsInJlc3VsdCIsInJlZ2lzdGVyVXNlciIsInRva2VuIiwidXNlciIsImlkIiwiX2lkIiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/auth/register.js\n");

/***/ }),

/***/ "axios?6fac":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth%2Fregister&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth%5Cregister.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();