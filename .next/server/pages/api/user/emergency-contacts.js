"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/emergency-contacts";
exports.ids = ["pages/api/user/emergency-contacts"];
exports.modules = {

/***/ "(api-node)/./lib/services/emergency-contacts-service.js":
/*!****************************************************!*\
  !*** ./lib/services/emergency-contacts-service.js ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\r\n * Service for managing emergency contacts using Pinata IPFS\r\n * All emergency contact data is stored on IPFS via Pinata instead of MongoDB\r\n */ \nconst { pinataService } = __webpack_require__(/*! ./pinata-service */ \"(api-node)/./lib/services/pinata-service.js\");\n/**\r\n * Emergency Contacts Service\r\n * Handles storing and retrieving emergency contacts from Pinata IPFS\r\n */ class EmergencyContactsService {\n    /**\r\n   * Get emergency contacts for a user\r\n   * @param {string} userId - User ID\r\n   * @returns {Promise<Array>} - Array of emergency contacts\r\n   */ async getEmergencyContacts(userId) {\n        try {\n            if (!userId) {\n                throw new Error('User ID is required');\n            }\n            // Get user pins from Pinata\n            const pins = await pinataService.getHistory(userId);\n            // Find emergency contacts pin\n            const contactsPin = pins.find((pin)=>{\n                const metadata = pin.metadata?.keyvalues;\n                return metadata?.type === 'emergency_contacts' && metadata?.userId === userId;\n            });\n            if (!contactsPin) {\n                // If no contacts exist, return empty array\n                return [];\n            }\n            // Get contacts data from Pinata\n            const contacts = await pinataService.getData(contactsPin.ipfs_pin_hash);\n            if (!contacts) {\n                throw new Error('Failed to retrieve emergency contacts from Pinata');\n            }\n            return contacts.contacts || [];\n        } catch (error) {\n            console.error('Error fetching emergency contacts from Pinata:', error);\n            // Return empty array as fallback\n            return [];\n        }\n    }\n    /**\r\n   * Update emergency contacts for a user\r\n   * @param {string} userId - User ID\r\n   * @param {Array} contacts - Array of emergency contact objects\r\n   * @returns {Promise<Object>} - Result of the operation\r\n   */ async updateEmergencyContacts(userId, contacts) {\n        try {\n            if (!userId) {\n                throw new Error('User ID is required');\n            }\n            if (!contacts || !Array.isArray(contacts)) {\n                throw new Error('Contacts must be an array');\n            }\n            // Sanitize and validate contacts\n            const sanitizedContacts = contacts.map((contact)=>({\n                    id: contact.id || Date.now().toString(),\n                    name: contact.name?.trim(),\n                    relationship: contact.relationship?.trim() || '',\n                    phone: contact.phone?.trim(),\n                    isWhatsApp: contact.isWhatsApp !== false // Default to true if not specified\n                })).filter((contact)=>contact.name && contact.phone);\n            // Get user pins from Pinata\n            const pins = await pinataService.getHistory(userId);\n            // Find emergency contacts pin\n            const contactsPin = pins.find((pin)=>{\n                const metadata = pin.metadata?.keyvalues;\n                return metadata?.type === 'emergency_contacts' && metadata?.userId === userId;\n            });\n            // Prepare data for storage\n            const contactsData = {\n                userId,\n                contacts: sanitizedContacts,\n                updatedAt: new Date(),\n                type: 'emergency_contacts'\n            };\n            // Store contacts to Pinata\n            const response = await pinataService.storeData(`emergency_contacts_${userId}`, contactsData, {\n                userId,\n                type: 'emergency_contacts'\n            });\n            // If we had a previous pin, remove it\n            if (contactsPin) {\n                await pinataService.removeData(contactsPin.ipfs_pin_hash);\n            }\n            return {\n                success: true,\n                contacts: sanitizedContacts,\n                ipfsHash: response.IpfsHash\n            };\n        } catch (error) {\n            console.error('Error updating emergency contacts on Pinata:', error);\n            throw error;\n        }\n    }\n}\nconst emergencyContactsService = new EmergencyContactsService();\nmodule.exports = {\n    emergencyContactsService\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9zZXJ2aWNlcy9lbWVyZ2VuY3ktY29udGFjdHMtc2VydmljZS5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7QUFDRCxNQUFNLEVBQUVBLGFBQWEsRUFBRSxHQUFHQyxtQkFBT0EsQ0FBQyxxRUFBa0I7QUFFcEQ7OztDQUdDLEdBQ0QsTUFBTUM7SUFDSjs7OztHQUlDLEdBQ0QsTUFBTUMscUJBQXFCQyxNQUFNLEVBQUU7UUFDakMsSUFBSTtZQUNGLElBQUksQ0FBQ0EsUUFBUTtnQkFDWCxNQUFNLElBQUlDLE1BQU07WUFDbEI7WUFFQSw0QkFBNEI7WUFDNUIsTUFBTUMsT0FBTyxNQUFNTixjQUFjTyxVQUFVLENBQUNIO1lBRTVDLDhCQUE4QjtZQUM5QixNQUFNSSxjQUFjRixLQUFLRyxJQUFJLENBQUNDLENBQUFBO2dCQUM1QixNQUFNQyxXQUFXRCxJQUFJQyxRQUFRLEVBQUVDO2dCQUMvQixPQUFPRCxVQUFVRSxTQUFTLHdCQUF3QkYsVUFBVVAsV0FBV0E7WUFDekU7WUFFQSxJQUFJLENBQUNJLGFBQWE7Z0JBQ2hCLDJDQUEyQztnQkFDM0MsT0FBTyxFQUFFO1lBQ1g7WUFFQSxnQ0FBZ0M7WUFDaEMsTUFBTU0sV0FBVyxNQUFNZCxjQUFjZSxPQUFPLENBQUNQLFlBQVlRLGFBQWE7WUFFdEUsSUFBSSxDQUFDRixVQUFVO2dCQUNiLE1BQU0sSUFBSVQsTUFBTTtZQUNsQjtZQUVBLE9BQU9TLFNBQVNBLFFBQVEsSUFBSSxFQUFFO1FBQ2hDLEVBQUUsT0FBT0csT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsa0RBQWtEQTtZQUVoRSxpQ0FBaUM7WUFDakMsT0FBTyxFQUFFO1FBQ1g7SUFDRjtJQUVBOzs7OztHQUtDLEdBQ0QsTUFBTUUsd0JBQXdCZixNQUFNLEVBQUVVLFFBQVEsRUFBRTtRQUM5QyxJQUFJO1lBQ0YsSUFBSSxDQUFDVixRQUFRO2dCQUNYLE1BQU0sSUFBSUMsTUFBTTtZQUNsQjtZQUVBLElBQUksQ0FBQ1MsWUFBWSxDQUFDTSxNQUFNQyxPQUFPLENBQUNQLFdBQVc7Z0JBQ3pDLE1BQU0sSUFBSVQsTUFBTTtZQUNsQjtZQUVBLGlDQUFpQztZQUNqQyxNQUFNaUIsb0JBQW9CUixTQUFTUyxHQUFHLENBQUNDLENBQUFBLFVBQVk7b0JBQ2pEQyxJQUFJRCxRQUFRQyxFQUFFLElBQUlDLEtBQUtDLEdBQUcsR0FBR0MsUUFBUTtvQkFDckNDLE1BQU1MLFFBQVFLLElBQUksRUFBRUM7b0JBQ3BCQyxjQUFjUCxRQUFRTyxZQUFZLEVBQUVELFVBQVU7b0JBQzlDRSxPQUFPUixRQUFRUSxLQUFLLEVBQUVGO29CQUN0QkcsWUFBWVQsUUFBUVMsVUFBVSxLQUFLLE1BQU0sbUNBQW1DO2dCQUM5RSxJQUFJQyxNQUFNLENBQUNWLENBQUFBLFVBQVdBLFFBQVFLLElBQUksSUFBSUwsUUFBUVEsS0FBSztZQUVuRCw0QkFBNEI7WUFDNUIsTUFBTTFCLE9BQU8sTUFBTU4sY0FBY08sVUFBVSxDQUFDSDtZQUU1Qyw4QkFBOEI7WUFDOUIsTUFBTUksY0FBY0YsS0FBS0csSUFBSSxDQUFDQyxDQUFBQTtnQkFDNUIsTUFBTUMsV0FBV0QsSUFBSUMsUUFBUSxFQUFFQztnQkFDL0IsT0FBT0QsVUFBVUUsU0FBUyx3QkFBd0JGLFVBQVVQLFdBQVdBO1lBQ3pFO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU0rQixlQUFlO2dCQUNuQi9CO2dCQUNBVSxVQUFVUTtnQkFDVmMsV0FBVyxJQUFJVjtnQkFDZmIsTUFBTTtZQUNSO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU13QixXQUFXLE1BQU1yQyxjQUFjc0MsU0FBUyxDQUM1QyxDQUFDLG1CQUFtQixFQUFFbEMsUUFBUSxFQUM5QitCLGNBQ0E7Z0JBQUUvQjtnQkFBUVMsTUFBTTtZQUFxQjtZQUd2QyxzQ0FBc0M7WUFDdEMsSUFBSUwsYUFBYTtnQkFDZixNQUFNUixjQUFjdUMsVUFBVSxDQUFDL0IsWUFBWVEsYUFBYTtZQUMxRDtZQUVBLE9BQU87Z0JBQ0x3QixTQUFTO2dCQUNUMUIsVUFBVVE7Z0JBQ1ZtQixVQUFVSixTQUFTSyxRQUFRO1lBQzdCO1FBQ0YsRUFBRSxPQUFPekIsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0RBQWdEQTtZQUM5RCxNQUFNQTtRQUNSO0lBQ0Y7QUFDRjtBQUVBLE1BQU0wQiwyQkFBMkIsSUFBSXpDO0FBRXJDMEMsT0FBT0MsT0FBTyxHQUFHO0lBQUVGO0FBQXlCIiwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXERla2h0ZSBoYWlcXG5ldXJvU3luY1xcTmV1cm9TeW5jLUFJLUZyb250ZW5kXFxsaWJcXHNlcnZpY2VzXFxlbWVyZ2VuY3ktY29udGFjdHMtc2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU2VydmljZSBmb3IgbWFuYWdpbmcgZW1lcmdlbmN5IGNvbnRhY3RzIHVzaW5nIFBpbmF0YSBJUEZTXHJcbiAqIEFsbCBlbWVyZ2VuY3kgY29udGFjdCBkYXRhIGlzIHN0b3JlZCBvbiBJUEZTIHZpYSBQaW5hdGEgaW5zdGVhZCBvZiBNb25nb0RCXHJcbiAqL1xyXG5jb25zdCB7IHBpbmF0YVNlcnZpY2UgfSA9IHJlcXVpcmUoJy4vcGluYXRhLXNlcnZpY2UnKTtcclxuXHJcbi8qKlxyXG4gKiBFbWVyZ2VuY3kgQ29udGFjdHMgU2VydmljZVxyXG4gKiBIYW5kbGVzIHN0b3JpbmcgYW5kIHJldHJpZXZpbmcgZW1lcmdlbmN5IGNvbnRhY3RzIGZyb20gUGluYXRhIElQRlNcclxuICovXHJcbmNsYXNzIEVtZXJnZW5jeUNvbnRhY3RzU2VydmljZSB7XHJcbiAgLyoqXHJcbiAgICogR2V0IGVtZXJnZW5jeSBjb250YWN0cyBmb3IgYSB1c2VyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIFVzZXIgSURcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBcnJheT59IC0gQXJyYXkgb2YgZW1lcmdlbmN5IGNvbnRhY3RzXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0RW1lcmdlbmN5Q29udGFjdHModXNlcklkKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgdXNlciBwaW5zIGZyb20gUGluYXRhXHJcbiAgICAgIGNvbnN0IHBpbnMgPSBhd2FpdCBwaW5hdGFTZXJ2aWNlLmdldEhpc3RvcnkodXNlcklkKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZpbmQgZW1lcmdlbmN5IGNvbnRhY3RzIHBpblxyXG4gICAgICBjb25zdCBjb250YWN0c1BpbiA9IHBpbnMuZmluZChwaW4gPT4ge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcGluLm1ldGFkYXRhPy5rZXl2YWx1ZXM7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhPy50eXBlID09PSAnZW1lcmdlbmN5X2NvbnRhY3RzJyAmJiBtZXRhZGF0YT8udXNlcklkID09PSB1c2VySWQ7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFjb250YWN0c1Bpbikge1xyXG4gICAgICAgIC8vIElmIG5vIGNvbnRhY3RzIGV4aXN0LCByZXR1cm4gZW1wdHkgYXJyYXlcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCBjb250YWN0cyBkYXRhIGZyb20gUGluYXRhXHJcbiAgICAgIGNvbnN0IGNvbnRhY3RzID0gYXdhaXQgcGluYXRhU2VydmljZS5nZXREYXRhKGNvbnRhY3RzUGluLmlwZnNfcGluX2hhc2gpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFjb250YWN0cykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHJldHJpZXZlIGVtZXJnZW5jeSBjb250YWN0cyBmcm9tIFBpbmF0YScpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gY29udGFjdHMuY29udGFjdHMgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBlbWVyZ2VuY3kgY29udGFjdHMgZnJvbSBQaW5hdGE6JywgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IGFzIGZhbGxiYWNrXHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBlbWVyZ2VuY3kgY29udGFjdHMgZm9yIGEgdXNlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEXHJcbiAgICogQHBhcmFtIHtBcnJheX0gY29udGFjdHMgLSBBcnJheSBvZiBlbWVyZ2VuY3kgY29udGFjdCBvYmplY3RzXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0Pn0gLSBSZXN1bHQgb2YgdGhlIG9wZXJhdGlvblxyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZUVtZXJnZW5jeUNvbnRhY3RzKHVzZXJJZCwgY29udGFjdHMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY29udGFjdHMgfHwgIUFycmF5LmlzQXJyYXkoY29udGFjdHMpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb250YWN0cyBtdXN0IGJlIGFuIGFycmF5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNhbml0aXplIGFuZCB2YWxpZGF0ZSBjb250YWN0c1xyXG4gICAgICBjb25zdCBzYW5pdGl6ZWRDb250YWN0cyA9IGNvbnRhY3RzLm1hcChjb250YWN0ID0+ICh7XHJcbiAgICAgICAgaWQ6IGNvbnRhY3QuaWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICAgIG5hbWU6IGNvbnRhY3QubmFtZT8udHJpbSgpLFxyXG4gICAgICAgIHJlbGF0aW9uc2hpcDogY29udGFjdC5yZWxhdGlvbnNoaXA/LnRyaW0oKSB8fCAnJyxcclxuICAgICAgICBwaG9uZTogY29udGFjdC5waG9uZT8udHJpbSgpLFxyXG4gICAgICAgIGlzV2hhdHNBcHA6IGNvbnRhY3QuaXNXaGF0c0FwcCAhPT0gZmFsc2UgLy8gRGVmYXVsdCB0byB0cnVlIGlmIG5vdCBzcGVjaWZpZWRcclxuICAgICAgfSkpLmZpbHRlcihjb250YWN0ID0+IGNvbnRhY3QubmFtZSAmJiBjb250YWN0LnBob25lKTtcclxuXHJcbiAgICAgIC8vIEdldCB1c2VyIHBpbnMgZnJvbSBQaW5hdGFcclxuICAgICAgY29uc3QgcGlucyA9IGF3YWl0IHBpbmF0YVNlcnZpY2UuZ2V0SGlzdG9yeSh1c2VySWQpO1xyXG4gICAgICBcclxuICAgICAgLy8gRmluZCBlbWVyZ2VuY3kgY29udGFjdHMgcGluXHJcbiAgICAgIGNvbnN0IGNvbnRhY3RzUGluID0gcGlucy5maW5kKHBpbiA9PiB7XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBwaW4ubWV0YWRhdGE/LmtleXZhbHVlcztcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGE/LnR5cGUgPT09ICdlbWVyZ2VuY3lfY29udGFjdHMnICYmIG1ldGFkYXRhPy51c2VySWQgPT09IHVzZXJJZDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBQcmVwYXJlIGRhdGEgZm9yIHN0b3JhZ2VcclxuICAgICAgY29uc3QgY29udGFjdHNEYXRhID0ge1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBjb250YWN0czogc2FuaXRpemVkQ29udGFjdHMsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHR5cGU6ICdlbWVyZ2VuY3lfY29udGFjdHMnXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBTdG9yZSBjb250YWN0cyB0byBQaW5hdGFcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwaW5hdGFTZXJ2aWNlLnN0b3JlRGF0YShcclxuICAgICAgICBgZW1lcmdlbmN5X2NvbnRhY3RzXyR7dXNlcklkfWAsXHJcbiAgICAgICAgY29udGFjdHNEYXRhLFxyXG4gICAgICAgIHsgdXNlcklkLCB0eXBlOiAnZW1lcmdlbmN5X2NvbnRhY3RzJyB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICAvLyBJZiB3ZSBoYWQgYSBwcmV2aW91cyBwaW4sIHJlbW92ZSBpdFxyXG4gICAgICBpZiAoY29udGFjdHNQaW4pIHtcclxuICAgICAgICBhd2FpdCBwaW5hdGFTZXJ2aWNlLnJlbW92ZURhdGEoY29udGFjdHNQaW4uaXBmc19waW5faGFzaCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICAgIGNvbnRhY3RzOiBzYW5pdGl6ZWRDb250YWN0cyxcclxuICAgICAgICBpcGZzSGFzaDogcmVzcG9uc2UuSXBmc0hhc2hcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGVtZXJnZW5jeSBjb250YWN0cyBvbiBQaW5hdGE6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGVtZXJnZW5jeUNvbnRhY3RzU2VydmljZSA9IG5ldyBFbWVyZ2VuY3lDb250YWN0c1NlcnZpY2UoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0geyBlbWVyZ2VuY3lDb250YWN0c1NlcnZpY2UgfTsgIl0sIm5hbWVzIjpbInBpbmF0YVNlcnZpY2UiLCJyZXF1aXJlIiwiRW1lcmdlbmN5Q29udGFjdHNTZXJ2aWNlIiwiZ2V0RW1lcmdlbmN5Q29udGFjdHMiLCJ1c2VySWQiLCJFcnJvciIsInBpbnMiLCJnZXRIaXN0b3J5IiwiY29udGFjdHNQaW4iLCJmaW5kIiwicGluIiwibWV0YWRhdGEiLCJrZXl2YWx1ZXMiLCJ0eXBlIiwiY29udGFjdHMiLCJnZXREYXRhIiwiaXBmc19waW5faGFzaCIsImVycm9yIiwiY29uc29sZSIsInVwZGF0ZUVtZXJnZW5jeUNvbnRhY3RzIiwiQXJyYXkiLCJpc0FycmF5Iiwic2FuaXRpemVkQ29udGFjdHMiLCJtYXAiLCJjb250YWN0IiwiaWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJuYW1lIiwidHJpbSIsInJlbGF0aW9uc2hpcCIsInBob25lIiwiaXNXaGF0c0FwcCIsImZpbHRlciIsImNvbnRhY3RzRGF0YSIsInVwZGF0ZWRBdCIsInJlc3BvbnNlIiwic3RvcmVEYXRhIiwicmVtb3ZlRGF0YSIsInN1Y2Nlc3MiLCJpcGZzSGFzaCIsIklwZnNIYXNoIiwiZW1lcmdlbmN5Q29udGFjdHNTZXJ2aWNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/services/emergency-contacts-service.js\n");

/***/ }),

/***/ "(api-node)/./lib/services/pinata-service.js":
/*!****************************************!*\
  !*** ./lib/services/pinata-service.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst axios = __webpack_require__(/*! axios */ \"axios?6fac\");\n/**\r\n * Pinata IPFS Service\r\n * Handles storing and retrieving data from Pinata IPFS\r\n */ class PinataService {\n    constructor(){\n        this.apiKey = process.env.PINATA_API_KEY;\n        this.apiSecret = process.env.PINATA_API_SECRET;\n        this.jwt = process.env.PINATA_JWT;\n        this.apiUrl = 'https://api.pinata.cloud';\n        this.gateway = 'https://gateway.pinata.cloud/ipfs/';\n    }\n    /**\r\n   * Check if the Pinata credentials are configured\r\n   */ isConfigured() {\n        return !!(this.jwt || this.apiKey && this.apiSecret);\n    }\n    /**\r\n   * Get the headers for Pinata API requests\r\n   */ getHeaders() {\n        if (this.jwt) {\n            return {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.jwt}`\n            };\n        } else if (this.apiKey && this.apiSecret) {\n            return {\n                'Content-Type': 'application/json',\n                'pinata_api_key': this.apiKey,\n                'pinata_secret_api_key': this.apiSecret\n            };\n        } else {\n            throw new Error('Pinata credentials not configured');\n        }\n    }\n    /**\r\n   * Store data on Pinata IPFS\r\n   * @param {string} keyName - Unique key for the data\r\n   * @param {object} data - Data to store\r\n   * @param {object} metadata - Optional metadata for the pin\r\n   * @returns {Promise<object>} - Response from Pinata\r\n   */ async storeData(keyName, data, metadata = {}) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            // Generate a unique identifier for the transaction\n            const uniqueId = `${keyName}_${Date.now()}`;\n            // Prepare the data for Pinata\n            const pinataBody = {\n                pinataContent: data,\n                pinataMetadata: {\n                    name: uniqueId,\n                    keyvalues: {\n                        userId: data.userId || 'anonymous',\n                        type: data.type || 'conversation',\n                        timestamp: Date.now(),\n                        ...metadata\n                    }\n                }\n            };\n            // Upload to Pinata\n            const response = await axios.post(`${this.apiUrl}/pinning/pinJSONToIPFS`, pinataBody, {\n                headers: this.getHeaders()\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Failed to store data on Pinata:', error?.response?.data || error?.message || error);\n            throw error;\n        }\n    }\n    /**\r\n   * Get data from Pinata IPFS\r\n   * @param {string} ipfsHash - IPFS hash to retrieve\r\n   * @returns {Promise<object>} - Retrieved data\r\n   */ async getData(ipfsHash) {\n        try {\n            if (!ipfsHash) {\n                throw new Error('IPFS hash is required');\n            }\n            // Fetch data from Pinata Gateway\n            const response = await axios.get(`${this.gateway}${ipfsHash}`);\n            return response.data;\n        } catch (error) {\n            console.error(`Failed to get data from Pinata (${ipfsHash}):`, error?.message || error);\n            return null;\n        }\n    }\n    /**\r\n   * Get history of pins for a user\r\n   * @param {string} userId - User ID to get history for\r\n   * @returns {Promise<Array>} - Array of pins\r\n   */ async getHistory(userId) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            if (!userId) {\n                return [];\n            }\n            // Query Pinata for pins with the user's ID\n            const response = await axios.get(`${this.apiUrl}/data/pinList?metadata[keyvalues][userId]={\"value\":\"${userId}\",\"op\":\"eq\"}&status=pinned`, {\n                headers: this.getHeaders()\n            });\n            return response.data.rows || [];\n        } catch (error) {\n            console.error(`Failed to get history from Pinata for user ${userId}:`, error?.response?.data || error?.message || error);\n            return [];\n        }\n    }\n    /**\r\n   * Remove data from Pinata IPFS\r\n   * @param {string} ipfsHash - IPFS hash to remove\r\n   * @returns {Promise<object>} - Response from Pinata\r\n   */ async removeData(ipfsHash) {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            if (!ipfsHash) {\n                throw new Error('IPFS hash is required');\n            }\n            // Unpin from Pinata\n            const response = await axios.delete(`${this.apiUrl}/pinning/unpin/${ipfsHash}`, {\n                headers: this.getHeaders()\n            });\n            return {\n                success: true,\n                data: response.data\n            };\n        } catch (error) {\n            console.error(`Failed to remove data from Pinata (${ipfsHash}):`, error?.response?.data || error?.message || error);\n            // Handle common Pinata error cases: \n            // 1. 404 - Pin doesn't exist\n            // 2. 400 with \"CURRENT_USER_HAS_NOT_PINNED_CID\" - User doesn't have permission to unpin\n            if (error?.response?.status === 404 || error?.response?.status === 400 && error?.response?.data?.error?.reason === 'CURRENT_USER_HAS_NOT_PINNED_CID') {\n                console.log(`Pin ${ipfsHash} not found or not owned by current user. Considering it removed.`);\n                return {\n                    success: true,\n                    message: 'Pin not found or not owned by current user'\n                };\n            }\n            throw error;\n        }\n    }\n    /**\r\n   * Test the Pinata connection\r\n   * @returns {Promise<boolean>} - Whether the connection was successful\r\n   */ async testConnection() {\n        try {\n            if (!this.isConfigured()) {\n                return false;\n            }\n            // Test the connection by getting the pin count\n            await axios.get(`${this.apiUrl}/data/userPinnedDataTotal`, {\n                headers: this.getHeaders()\n            });\n            return true;\n        } catch (error) {\n            console.error('Pinata connection test failed:', error?.response?.data || error?.message || error);\n            return false;\n        }\n    }\n    /**\r\n   * Get all pins from Pinata regardless of user ID\r\n   * @returns {Promise<Array>} - Array of pins\r\n   */ async getAllPins() {\n        try {\n            if (!this.isConfigured()) {\n                throw new Error('Pinata credentials not configured');\n            }\n            // Query Pinata for all pins\n            const response = await axios.get(`${this.apiUrl}/data/pinList?status=pinned`, {\n                headers: this.getHeaders()\n            });\n            return response.data.rows || [];\n        } catch (error) {\n            console.error(`Failed to get all pins from Pinata:`, error?.response?.data || error?.message || error);\n            return [];\n        }\n    }\n}\nconst pinataService = new PinataService();\nmodule.exports = {\n    pinataService\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9zZXJ2aWNlcy9waW5hdGEtc2VydmljZS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsUUFBUUMsbUJBQU9BLENBQUMseUJBQU87QUFFN0I7OztDQUdDLEdBQ0QsTUFBTUM7SUFDSkMsYUFBYztRQUNaLElBQUksQ0FBQ0MsTUFBTSxHQUFHQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7UUFDeEMsSUFBSSxDQUFDQyxTQUFTLEdBQUdILFFBQVFDLEdBQUcsQ0FBQ0csaUJBQWlCO1FBQzlDLElBQUksQ0FBQ0MsR0FBRyxHQUFHTCxRQUFRQyxHQUFHLENBQUNLLFVBQVU7UUFDakMsSUFBSSxDQUFDQyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBRztJQUNqQjtJQUVBOztHQUVDLEdBQ0RDLGVBQWU7UUFDYixPQUFPLENBQUMsQ0FBRSxLQUFJLENBQUNKLEdBQUcsSUFBSyxJQUFJLENBQUNOLE1BQU0sSUFBSSxJQUFJLENBQUNJLFNBQVM7SUFDdEQ7SUFFQTs7R0FFQyxHQUNETyxhQUFhO1FBQ1gsSUFBSSxJQUFJLENBQUNMLEdBQUcsRUFBRTtZQUNaLE9BQU87Z0JBQ0wsZ0JBQWdCO2dCQUNoQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDQSxHQUFHLEVBQUU7WUFDdkM7UUFDRixPQUFPLElBQUksSUFBSSxDQUFDTixNQUFNLElBQUksSUFBSSxDQUFDSSxTQUFTLEVBQUU7WUFDeEMsT0FBTztnQkFDTCxnQkFBZ0I7Z0JBQ2hCLGtCQUFrQixJQUFJLENBQUNKLE1BQU07Z0JBQzdCLHlCQUF5QixJQUFJLENBQUNJLFNBQVM7WUFDekM7UUFDRixPQUFPO1lBQ0wsTUFBTSxJQUFJUSxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQTs7Ozs7O0dBTUMsR0FDRCxNQUFNQyxVQUFVQyxPQUFPLEVBQUVDLElBQUksRUFBRUMsV0FBVyxDQUFDLENBQUMsRUFBRTtRQUM1QyxJQUFJO1lBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ04sWUFB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QUFVO1lBQUc7WUFHL0IsT0FBT2lCLFNBQVNiLElBQUksQ0FBQ3VCLElBQUksSUFBSSxFQUFFO1FBQ2pDLEVBQUUsT0FBT1AsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxtQ0FBbUMsQ0FBQyxFQUFFQSxPQUFPSCxVQUFVYixRQUFRZ0IsT0FBT0UsV0FBV0Y7WUFDaEcsT0FBTyxFQUFFO1FBQ1g7SUFDRjtBQUNGO0FBRUEsTUFBTWdCLGdCQUFnQixJQUFJakQ7QUFFMUJrRCxPQUFPQyxPQUFPLEdBQUc7SUFBRUY7QUFBYyIsInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxEZWtodGUgaGFpXFxuZXVyb1N5bmNcXE5ldXJvU3luYy1BSS1Gcm9udGVuZFxcbGliXFxzZXJ2aWNlc1xccGluYXRhLXNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xyXG5cclxuLyoqXHJcbiAqIFBpbmF0YSBJUEZTIFNlcnZpY2VcclxuICogSGFuZGxlcyBzdG9yaW5nIGFuZCByZXRyaWV2aW5nIGRhdGEgZnJvbSBQaW5hdGEgSVBGU1xyXG4gKi9cclxuY2xhc3MgUGluYXRhU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmFwaUtleSA9IHByb2Nlc3MuZW52LlBJTkFUQV9BUElfS0VZO1xyXG4gICAgdGhpcy5hcGlTZWNyZXQgPSBwcm9jZXNzLmVudi5QSU5BVEFfQVBJX1NFQ1JFVDtcclxuICAgIHRoaXMuand0ID0gcHJvY2Vzcy5lbnYuUElOQVRBX0pXVDtcclxuICAgIHRoaXMuYXBpVXJsID0gJ2h0dHBzOi8vYXBpLnBpbmF0YS5jbG91ZCc7XHJcbiAgICB0aGlzLmdhdGV3YXkgPSAnaHR0cHM6Ly9nYXRld2F5LnBpbmF0YS5jbG91ZC9pcGZzLyc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiB0aGUgUGluYXRhIGNyZWRlbnRpYWxzIGFyZSBjb25maWd1cmVkXHJcbiAgICovXHJcbiAgaXNDb25maWd1cmVkKCkge1xyXG4gICAgcmV0dXJuICEhKHRoaXMuand0IHx8ICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaVNlY3JldCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBoZWFkZXJzIGZvciBQaW5hdGEgQVBJIHJlcXVlc3RzXHJcbiAgICovXHJcbiAgZ2V0SGVhZGVycygpIHtcclxuICAgIGlmICh0aGlzLmp3dCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5qd3R9YFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFwaUtleSAmJiB0aGlzLmFwaVNlY3JldCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3BpbmF0YV9hcGlfa2V5JzogdGhpcy5hcGlLZXksXHJcbiAgICAgICAgJ3BpbmF0YV9zZWNyZXRfYXBpX2tleSc6IHRoaXMuYXBpU2VjcmV0XHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BpbmF0YSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmUgZGF0YSBvbiBQaW5hdGEgSVBGU1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlOYW1lIC0gVW5pcXVlIGtleSBmb3IgdGhlIGRhdGFcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIERhdGEgdG8gc3RvcmVcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBPcHRpb25hbCBtZXRhZGF0YSBmb3IgdGhlIHBpblxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59IC0gUmVzcG9uc2UgZnJvbSBQaW5hdGFcclxuICAgKi9cclxuICBhc3luYyBzdG9yZURhdGEoa2V5TmFtZSwgZGF0YSwgbWV0YWRhdGEgPSB7fSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCF0aGlzLmlzQ29uZmlndXJlZCgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5hdGEgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRyYW5zYWN0aW9uXHJcbiAgICAgIGNvbnN0IHVuaXF1ZUlkID0gYCR7a2V5TmFtZX1fJHtEYXRlLm5vdygpfWA7XHJcbiAgICAgIFxyXG4gICAgICAvLyBQcmVwYXJlIHRoZSBkYXRhIGZvciBQaW5hdGFcclxuICAgICAgY29uc3QgcGluYXRhQm9keSA9IHtcclxuICAgICAgICBwaW5hdGFDb250ZW50OiBkYXRhLFxyXG4gICAgICAgIHBpbmF0YU1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBuYW1lOiB1bmlxdWVJZCxcclxuICAgICAgICAgIGtleXZhbHVlczoge1xyXG4gICAgICAgICAgICB1c2VySWQ6IGRhdGEudXNlcklkIHx8ICdhbm9ueW1vdXMnLFxyXG4gICAgICAgICAgICB0eXBlOiBkYXRhLnR5cGUgfHwgJ2NvbnZlcnNhdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgLi4ubWV0YWRhdGFcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBVcGxvYWQgdG8gUGluYXRhXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vcGlubmluZy9waW5KU09OVG9JUEZTYCxcclxuICAgICAgICBwaW5hdGFCb2R5LFxyXG4gICAgICAgIHsgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKCkgfVxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RvcmUgZGF0YSBvbiBQaW5hdGE6JywgZXJyb3I/LnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yPy5tZXNzYWdlIHx8IGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZGF0YSBmcm9tIFBpbmF0YSBJUEZTXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlwZnNIYXNoIC0gSVBGUyBoYXNoIHRvIHJldHJpZXZlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gLSBSZXRyaWV2ZWQgZGF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldERhdGEoaXBmc0hhc2gpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghaXBmc0hhc2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lQRlMgaGFzaCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGZXRjaCBkYXRhIGZyb20gUGluYXRhIEdhdGV3YXlcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7dGhpcy5nYXRld2F5fSR7aXBmc0hhc2h9YCk7XHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGdldCBkYXRhIGZyb20gUGluYXRhICgke2lwZnNIYXNofSk6YCwgZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBoaXN0b3J5IG9mIHBpbnMgZm9yIGEgdXNlclxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBVc2VyIElEIHRvIGdldCBoaXN0b3J5IGZvclxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gLSBBcnJheSBvZiBwaW5zXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0SGlzdG9yeSh1c2VySWQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBRdWVyeSBQaW5hdGEgZm9yIHBpbnMgd2l0aCB0aGUgdXNlcidzIElEXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFxyXG4gICAgICAgIGAke3RoaXMuYXBpVXJsfS9kYXRhL3Bpbkxpc3Q/bWV0YWRhdGFba2V5dmFsdWVzXVt1c2VySWRdPXtcInZhbHVlXCI6XCIke3VzZXJJZH1cIixcIm9wXCI6XCJlcVwifSZzdGF0dXM9cGlubmVkYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJvd3MgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGhpc3RvcnkgZnJvbSBQaW5hdGEgZm9yIHVzZXIgJHt1c2VySWR9OmAsIGVycm9yPy5yZXNwb25zZT8uZGF0YSB8fCBlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZSBkYXRhIGZyb20gUGluYXRhIElQRlNcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaXBmc0hhc2ggLSBJUEZTIGhhc2ggdG8gcmVtb3ZlXHJcbiAgICogQHJldHVybnMge1Byb21pc2U8b2JqZWN0Pn0gLSBSZXNwb25zZSBmcm9tIFBpbmF0YVxyXG4gICAqL1xyXG4gIGFzeW5jIHJlbW92ZURhdGEoaXBmc0hhc2gpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghaXBmc0hhc2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lQRlMgaGFzaCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBVbnBpbiBmcm9tIFBpbmF0YVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmRlbGV0ZShcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vcGlubmluZy91bnBpbi8ke2lwZnNIYXNofWAsXHJcbiAgICAgICAgeyBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKSB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXNwb25zZS5kYXRhIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVtb3ZlIGRhdGEgZnJvbSBQaW5hdGEgKCR7aXBmc0hhc2h9KTpgLCBlcnJvcj8ucmVzcG9uc2U/LmRhdGEgfHwgZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgLy8gSGFuZGxlIGNvbW1vbiBQaW5hdGEgZXJyb3IgY2FzZXM6IFxyXG4gICAgICAvLyAxLiA0MDQgLSBQaW4gZG9lc24ndCBleGlzdFxyXG4gICAgICAvLyAyLiA0MDAgd2l0aCBcIkNVUlJFTlRfVVNFUl9IQVNfTk9UX1BJTk5FRF9DSURcIiAtIFVzZXIgZG9lc24ndCBoYXZlIHBlcm1pc3Npb24gdG8gdW5waW5cclxuICAgICAgaWYgKGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID09PSA0MDQgfHwgXHJcbiAgICAgICAgICAoZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwMCAmJiBcclxuICAgICAgICAgICBlcnJvcj8ucmVzcG9uc2U/LmRhdGE/LmVycm9yPy5yZWFzb24gPT09ICdDVVJSRU5UX1VTRVJfSEFTX05PVF9QSU5ORURfQ0lEJykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUGluICR7aXBmc0hhc2h9IG5vdCBmb3VuZCBvciBub3Qgb3duZWQgYnkgY3VycmVudCB1c2VyLiBDb25zaWRlcmluZyBpdCByZW1vdmVkLmApO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICdQaW4gbm90IGZvdW5kIG9yIG5vdCBvd25lZCBieSBjdXJyZW50IHVzZXInIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGVzdCB0aGUgUGluYXRhIGNvbm5lY3Rpb25cclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gLSBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHdhcyBzdWNjZXNzZnVsXHJcbiAgICovXHJcbiAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoIXRoaXMuaXNDb25maWd1cmVkKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb24gYnkgZ2V0dGluZyB0aGUgcGluIGNvdW50XHJcbiAgICAgIGF3YWl0IGF4aW9zLmdldChcclxuICAgICAgICBgJHt0aGlzLmFwaVVybH0vZGF0YS91c2VyUGlubmVkRGF0YVRvdGFsYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignUGluYXRhIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3I/LnJlc3BvbnNlPy5kYXRhIHx8IGVycm9yPy5tZXNzYWdlIHx8IGVycm9yKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFsbCBwaW5zIGZyb20gUGluYXRhIHJlZ2FyZGxlc3Mgb2YgdXNlciBJRFxyXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5Pn0gLSBBcnJheSBvZiBwaW5zXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWxsUGlucygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghdGhpcy5pc0NvbmZpZ3VyZWQoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUGluYXRhIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFF1ZXJ5IFBpbmF0YSBmb3IgYWxsIHBpbnNcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoXHJcbiAgICAgICAgYCR7dGhpcy5hcGlVcmx9L2RhdGEvcGluTGlzdD9zdGF0dXM9cGlubmVkYCxcclxuICAgICAgICB7IGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpIH1cclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJvd3MgfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2V0IGFsbCBwaW5zIGZyb20gUGluYXRhOmAsIGVycm9yPy5yZXNwb25zZT8uZGF0YSB8fCBlcnJvcj8ubWVzc2FnZSB8fCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHBpbmF0YVNlcnZpY2UgPSBuZXcgUGluYXRhU2VydmljZSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IHBpbmF0YVNlcnZpY2UgfTsgIl0sIm5hbWVzIjpbImF4aW9zIiwicmVxdWlyZSIsIlBpbmF0YVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJQSU5BVEFfQVBJX0tFWSIsImFwaVNlY3JldCIsIlBJTkFUQV9BUElfU0VDUkVUIiwiand0IiwiUElOQVRBX0pXVCIsImFwaVVybCIsImdhdGV3YXkiLCJpc0NvbmZpZ3VyZWQiLCJnZXRIZWFkZXJzIiwiRXJyb3IiLCJzdG9yZURhdGEiLCJrZXlOYW1lIiwiZGF0YSIsIm1ldGFkYXRhIiwidW5pcXVlSWQiLCJEYXRlIiwibm93IiwicGluYXRhQm9keSIsInBpbmF0YUNvbnRlbnQiLCJwaW5hdGFNZXRhZGF0YSIsIm5hbWUiLCJrZXl2YWx1ZXMiLCJ1c2VySWQiLCJ0eXBlIiwidGltZXN0YW1wIiwicmVzcG9uc2UiLCJwb3N0IiwiaGVhZGVycyIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJnZXREYXRhIiwiaXBmc0hhc2giLCJnZXQiLCJnZXRIaXN0b3J5Iiwicm93cyIsInJlbW92ZURhdGEiLCJkZWxldGUiLCJzdWNjZXNzIiwic3RhdHVzIiwicmVhc29uIiwibG9nIiwidGVzdENvbm5lY3Rpb24iLCJnZXRBbGxQaW5zIiwicGluYXRhU2VydmljZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/services/pinata-service.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Femergency-contacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cemergency-contacts.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Femergency-contacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cemergency-contacts.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_user_emergency_contacts_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\user\\emergency-contacts.js */ \"(api-node)/./pages/api/user/emergency-contacts.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_emergency_contacts_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_user_emergency_contacts_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/user/emergency-contacts\",\n        pathname: \"/api/user/emergency-contacts\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_user_emergency_contacts_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdXNlciUyRmVtZXJnZW5jeS1jb250YWN0cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXNlciU1Q2VtZXJnZW5jeS1jb250YWN0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNzRTtBQUN0RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsa0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGtFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHVzZXJcXFxcZW1lcmdlbmN5LWNvbnRhY3RzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyL2VtZXJnZW5jeS1jb250YWN0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3VzZXIvZW1lcmdlbmN5LWNvbnRhY3RzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Femergency-contacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cemergency-contacts.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/user/emergency-contacts.js":
/*!**********************************************!*\
  !*** ./pages/api/user/emergency-contacts.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_services_emergency_contacts_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/services/emergency-contacts-service */ \"(api-node)/./lib/services/emergency-contacts-service.js\");\n/* harmony import */ var _lib_services_emergency_contacts_service__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lib_services_emergency_contacts_service__WEBPACK_IMPORTED_MODULE_0__);\n/**\r\n * API endpoint for managing emergency contacts\r\n * \r\n * GET: Fetch the user's emergency contacts\r\n * POST: Save/update the user's emergency contacts\r\n */ \n/**\r\n * @description API handler for emergency contacts\r\n * @route GET /api/user/emergency-contacts - Retrieve user's emergency contacts\r\n * @route POST /api/user/emergency-contacts - Update user's emergency contacts\r\n */ async function handler(req, res) {\n    // Get the user ID from the request\n    // The client sends user ID either in query params (GET) or request body (POST)\n    const userId = req.query.userId || req.body?.userId;\n    if (!userId) {\n        return res.status(401).json({\n            success: false,\n            error: 'User ID is required'\n        });\n    }\n    try {\n        if (req.method === 'GET') {\n            // Retrieve emergency contacts using Pinata service\n            const contacts = await _lib_services_emergency_contacts_service__WEBPACK_IMPORTED_MODULE_0__.emergencyContactsService.getEmergencyContacts(userId);\n            return res.status(200).json({\n                success: true,\n                contacts\n            });\n        } else if (req.method === 'POST') {\n            // Validate request body\n            if (!req.body.contacts || !Array.isArray(req.body.contacts)) {\n                return res.status(400).json({\n                    success: false,\n                    error: 'Invalid request body'\n                });\n            }\n            // Update emergency contacts using Pinata service\n            const result = await _lib_services_emergency_contacts_service__WEBPACK_IMPORTED_MODULE_0__.emergencyContactsService.updateEmergencyContacts(userId, req.body.contacts);\n            return res.status(200).json({\n                success: true,\n                message: 'Emergency contacts updated successfully',\n                contacts: result.contacts\n            });\n        }\n        // Method not allowed\n        return res.status(405).json({\n            success: false,\n            error: 'Method not allowed'\n        });\n    } catch (error) {\n        console.error('Error handling emergency contacts:', error);\n        return res.status(500).json({\n            success: false,\n            error: 'Server error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS91c2VyL2VtZXJnZW5jeS1jb250YWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUUyRjtBQUU1Rjs7OztDQUlDLEdBQ2MsZUFBZUMsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLG1DQUFtQztJQUNuQywrRUFBK0U7SUFDL0UsTUFBTUMsU0FBU0YsSUFBSUcsS0FBSyxDQUFDRCxNQUFNLElBQUlGLElBQUlJLElBQUksRUFBRUY7SUFFN0MsSUFBSSxDQUFDQSxRQUFRO1FBQ1gsT0FBT0QsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUQyxPQUFPO1FBQ1Q7SUFDRjtJQUVBLElBQUk7UUFDRixJQUFJUixJQUFJUyxNQUFNLEtBQUssT0FBTztZQUN4QixtREFBbUQ7WUFDbkQsTUFBTUMsV0FBVyxNQUFNWiw4RkFBd0JBLENBQUNhLG9CQUFvQixDQUFDVDtZQUVyRSxPQUFPRCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVEc7WUFDRjtRQUNGLE9BRUssSUFBSVYsSUFBSVMsTUFBTSxLQUFLLFFBQVE7WUFDOUIsd0JBQXdCO1lBQ3hCLElBQUksQ0FBQ1QsSUFBSUksSUFBSSxDQUFDTSxRQUFRLElBQUksQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDYixJQUFJSSxJQUFJLENBQUNNLFFBQVEsR0FBRztnQkFDM0QsT0FBT1QsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFDMUJDLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLGlEQUFpRDtZQUNqRCxNQUFNTSxTQUFTLE1BQU1oQiw4RkFBd0JBLENBQUNpQix1QkFBdUIsQ0FDbkViLFFBQ0FGLElBQUlJLElBQUksQ0FBQ00sUUFBUTtZQUduQixPQUFPVCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVFMsU0FBUztnQkFDVE4sVUFBVUksT0FBT0osUUFBUTtZQUMzQjtRQUNGO1FBRUEscUJBQXFCO1FBQ3JCLE9BQU9ULElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEMsT0FBTztRQUNUO0lBQ0YsRUFBRSxPQUFPQSxPQUFPO1FBQ2RTLFFBQVFULEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE9BQU9QLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFNBQVM7WUFDVEMsT0FBTztRQUNUO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxEZWtodGUgaGFpXFxuZXVyb1N5bmNcXE5ldXJvU3luYy1BSS1Gcm9udGVuZFxccGFnZXNcXGFwaVxcdXNlclxcZW1lcmdlbmN5LWNvbnRhY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBUEkgZW5kcG9pbnQgZm9yIG1hbmFnaW5nIGVtZXJnZW5jeSBjb250YWN0c1xyXG4gKiBcclxuICogR0VUOiBGZXRjaCB0aGUgdXNlcidzIGVtZXJnZW5jeSBjb250YWN0c1xyXG4gKiBQT1NUOiBTYXZlL3VwZGF0ZSB0aGUgdXNlcidzIGVtZXJnZW5jeSBjb250YWN0c1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGVtZXJnZW5jeUNvbnRhY3RzU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9zZXJ2aWNlcy9lbWVyZ2VuY3ktY29udGFjdHMtc2VydmljZSc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uIEFQSSBoYW5kbGVyIGZvciBlbWVyZ2VuY3kgY29udGFjdHNcclxuICogQHJvdXRlIEdFVCAvYXBpL3VzZXIvZW1lcmdlbmN5LWNvbnRhY3RzIC0gUmV0cmlldmUgdXNlcidzIGVtZXJnZW5jeSBjb250YWN0c1xyXG4gKiBAcm91dGUgUE9TVCAvYXBpL3VzZXIvZW1lcmdlbmN5LWNvbnRhY3RzIC0gVXBkYXRlIHVzZXIncyBlbWVyZ2VuY3kgY29udGFjdHNcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAvLyBHZXQgdGhlIHVzZXIgSUQgZnJvbSB0aGUgcmVxdWVzdFxyXG4gIC8vIFRoZSBjbGllbnQgc2VuZHMgdXNlciBJRCBlaXRoZXIgaW4gcXVlcnkgcGFyYW1zIChHRVQpIG9yIHJlcXVlc3QgYm9keSAoUE9TVClcclxuICBjb25zdCB1c2VySWQgPSByZXEucXVlcnkudXNlcklkIHx8IHJlcS5ib2R5Py51c2VySWQ7XHJcbiAgXHJcbiAgaWYgKCF1c2VySWQpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnXHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICAvLyBSZXRyaWV2ZSBlbWVyZ2VuY3kgY29udGFjdHMgdXNpbmcgUGluYXRhIHNlcnZpY2VcclxuICAgICAgY29uc3QgY29udGFjdHMgPSBhd2FpdCBlbWVyZ2VuY3lDb250YWN0c1NlcnZpY2UuZ2V0RW1lcmdlbmN5Q29udGFjdHModXNlcklkKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBjb250YWN0c1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XHJcbiAgICAgIC8vIFZhbGlkYXRlIHJlcXVlc3QgYm9keVxyXG4gICAgICBpZiAoIXJlcS5ib2R5LmNvbnRhY3RzIHx8ICFBcnJheS5pc0FycmF5KHJlcS5ib2R5LmNvbnRhY3RzKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IGJvZHknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSBlbWVyZ2VuY3kgY29udGFjdHMgdXNpbmcgUGluYXRhIHNlcnZpY2VcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1lcmdlbmN5Q29udGFjdHNTZXJ2aWNlLnVwZGF0ZUVtZXJnZW5jeUNvbnRhY3RzKFxyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICByZXEuYm9keS5jb250YWN0c1xyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFbWVyZ2VuY3kgY29udGFjdHMgdXBkYXRlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgIGNvbnRhY3RzOiByZXN1bHQuY29udGFjdHNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE1ldGhvZCBub3QgYWxsb3dlZFxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJ1xyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGVtZXJnZW5jeSBjb250YWN0czonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InXHJcbiAgICB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbImVtZXJnZW5jeUNvbnRhY3RzU2VydmljZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VySWQiLCJxdWVyeSIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwibWV0aG9kIiwiY29udGFjdHMiLCJnZXRFbWVyZ2VuY3lDb250YWN0cyIsIkFycmF5IiwiaXNBcnJheSIsInJlc3VsdCIsInVwZGF0ZUVtZXJnZW5jeUNvbnRhY3RzIiwibWVzc2FnZSIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/user/emergency-contacts.js\n");

/***/ }),

/***/ "axios?6fac":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fuser%2Femergency-contacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cuser%5Cemergency-contacts.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();